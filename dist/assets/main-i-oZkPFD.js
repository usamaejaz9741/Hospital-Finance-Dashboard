const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RevenueChart-BbB-I8rM.js","assets/vendor-BKCzIg0M.js","assets/useChartTheme-BOP7wqsb.js","assets/ChartNoData-DvjNDMw_.js","assets/ExpensePieChart-D4CnEneA.js","assets/CashFlowChart-DJeNNp0R.js","assets/PatientMetricsCard-B-v2oTkH.js","assets/DepartmentTable-CxVvcTTp.js"])))=>i.map(i=>d[i]);
import{r as e,j as a,a as t,w as r,c as s,o,s as n,b as l,e as i,R as c,d}from"./vendor-BKCzIg0M.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const m={},h=function(e,a,t){let r=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=e?.nonce||e?.getAttribute("nonce");s=a.map(e=>{if((e=function(e){return"/"+e}(e))in m)return;m[e]=!0;const a=e.endsWith(".css"),r=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=a?"stylesheet":"modulepreload",a||(s.as="script"),s.crossOrigin="",s.href=e,t&&s.setAttribute("nonce",t),document.head.appendChild(s),a?new Promise((a,t)=>{s.addEventListener("load",a),s.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}),r=Promise.all(s.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var s;function o(e){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=e,window.dispatchEvent(a),!a.defaultPrevented)throw e}return r.then(a=>{for(const e of a||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})},p=({options:t,value:r,onChange:s,placeholder:o,className:n=""})=>{const[l,i]=e.useState(!1),c=e.useRef(null),d=t.find(e=>e.value===r);return e.useEffect(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),a.jsxs("div",{ref:c,className:`relative ${n}`,style:{overflow:"visible"},children:[a.jsx("button",{type:"button",className:"w-full dropdown-button text-secondary hover:text-primary text-left shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-400/50 interactive",style:{borderRadius:"var(--radius-md)",padding:"var(--space-2) var(--space-4)"},onClick:()=>{i(!l)},"aria-haspopup":"listbox","aria-expanded":l,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"min-w-0 flex-1",children:d?a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"body-base font-medium text-primary truncate",style:{marginBottom:"0"},children:d.label}),d.subtitle&&a.jsx("div",{className:"text-caption text-tertiary truncate",style:{marginTop:"var(--space-1)",marginBottom:"0"},children:d.subtitle})]}):a.jsx("span",{className:"body-base text-tertiary truncate",children:o})}),a.jsx("div",{className:"ml-2 flex-shrink-0",children:a.jsx("svg",{className:"w-4 h-4 text-white/60 transition-transform duration-200 "+(l?"transform rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),a.jsx("div",{className:"dropdown-options gradient-bg-primary absolute w-full overflow-hidden transition-all duration-300 ease-in-out "+(l?"opacity-100 translate-y-0":"opacity-0 -translate-y-2 pointer-events-none"),role:"listbox",style:{zIndex:99999,position:"absolute",top:"100%",left:0,right:0,maxHeight:t.length>4?"300px":"auto",marginTop:"var(--space-2)",borderRadius:"var(--radius-md)"},children:a.jsx("div",{className:t.length>4?"overflow-y-auto":"",style:{maxHeight:t.length>4?"300px":"auto"},children:t.map(e=>a.jsx("button",{type:"button",className:"dropdown-option w-full text-left focus:outline-none transition-colors duration-150 interactive "+(e.value===r?"selected":""),style:{padding:"var(--space-2) var(--space-4)"},onClick:()=>{return a=e.value,s(a),void i(!1);var a},role:"option","aria-selected":e.value===r,children:a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium truncate text-primary",style:{fontSize:"var(--text-base)"},children:e.label}),e.subtitle&&a.jsx("div",{className:"text-tertiary truncate",style:{fontSize:"var(--text-xs)",marginTop:"var(--space-1)"},children:e.subtitle})]})},e.value))})})]})},u=e.createContext(void 0),x=({children:t})=>{const[r,s]=e.useState("auto"),[o,n]=e.useState("light"),[l,i]=e.useState(!1),c=e.useCallback(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),d=e.useCallback(e=>{const a=document.documentElement;i(!0),a.classList.add("transitioning"),setTimeout(()=>{"dark"===e?a.classList.add("dark"):a.classList.remove("dark"),document.body.offsetHeight,document.querySelectorAll(".glass-card, .btn-base, .dropdown-button, .theme-toggle, .blob, .animate-float").forEach(e=>{window.getComputedStyle(e).backgroundColor,window.getComputedStyle(e).color,window.getComputedStyle(e).borderColor})},1200),setTimeout(()=>{a.classList.remove("transitioning"),i(!1),document.querySelectorAll('.blob, .animate-float, [class*="animate-"]').forEach(e=>{e.style.animationPlayState="running"})},3500)},[]),m=e.useCallback(e=>"auto"===e?c():e,[c]);e.useEffect(()=>{const e=document.documentElement;e.classList.add("no-transitions");const a=()=>{["preload-themes glass-card btn-base btn-primary btn-secondary btn-danger btn-ghost","dropdown-button dropdown-options dropdown-option theme-toggle header-glass","animate-float animate-pulse-glow blob blob-center performance-insight-card","logo-container logo-container-inverted avatar-gradient-border","interactive glass-card-hover card badge alert nav panel tooltip","form-input-focus custom-radio custom-checkbox custom-select","mobile-menu-overlay sidebar-glass user-profile-dropdown"].forEach(a=>{const t=document.createElement("div");t.style.position="absolute",t.style.visibility="hidden",t.style.pointerEvents="none",t.style.top="-9999px",t.className=a,document.body.appendChild(t),e.classList.remove("dark");const r=window.getComputedStyle(t);r.backgroundColor,r.color,r.borderColor,r.boxShadow,r.backgroundImage,r.backdropFilter,r.filter,r.textShadow,r.stroke,r.fill,e.classList.add("dark");const s=window.getComputedStyle(t);s.backgroundColor,s.color,s.borderColor,s.boxShadow,s.backgroundImage,s.backdropFilter,s.filter,s.textShadow,s.stroke,s.fill,document.body.removeChild(t)}),e.classList.remove("dark"),window.getComputedStyle(e).getPropertyValue("--color-purple-500"),window.getComputedStyle(e).getPropertyValue("--gradient-bg-primary"),window.getComputedStyle(e).getPropertyValue("--surface-primary"),e.classList.add("dark"),window.getComputedStyle(e).getPropertyValue("--color-purple-500"),window.getComputedStyle(e).getPropertyValue("--gradient-bg-primary"),window.getComputedStyle(e).getPropertyValue("--surface-primary")};a(),setTimeout(()=>{a(),setTimeout(()=>{const a=localStorage.getItem("hospitalFinanceTheme")||"auto",t=m(a);"dark"===t?e.classList.add("dark"):e.classList.remove("dark"),s(a),n(t),setTimeout(()=>{e.classList.remove("no-transitions")},200)},100)},100)},[m]),e.useEffect(()=>{const e=window.matchMedia("(prefers-color-scheme: dark)"),a=e=>{const a=e.matches?"dark":"light";"auto"===r&&(n(a),d(a))};return e.addEventListener("change",a),()=>e.removeEventListener("change",a)},[r,d]);const h=e.useCallback(e=>{const a=m(e);s(e),n(a),localStorage.setItem("hospitalFinanceTheme",e),d(a)},[m,d]),p=e.useCallback(()=>{h("auto"===r?"light"===o?"dark":"light":"light"===r?"dark":"light")},[r,o,h]),x={theme:r,resolvedTheme:o,toggleTheme:p,setTheme:h,isTransitioning:l};return a.jsx(u.Provider,{value:x,children:t})},g=()=>{const a=e.useContext(u);if(void 0===a)throw new Error("useTheme must be used within a ThemeProvider. Make sure to wrap your component tree with <ThemeProvider>.");return a},v=({className:e="",size:t="md"})=>{const{resolvedTheme:r,setTheme:s,isTransitioning:o}=g(),n={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[t];return a.jsx("button",{onClick:()=>s("light"===r?"dark":"light"),disabled:o,className:`\n        theme-toggle relative w-12 h-12 rounded-xl\n        text-white/80 hover:text-white\n        focus:outline-none focus:ring-2 focus:ring-white/30 focus:ring-offset-2 \n        focus:ring-offset-transparent\n        group overflow-hidden\n        transition-all duration-300 hover:scale-105\n        ${o?"animate-pulse cursor-wait":""}\n        ${e}\n      `,style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(168, 85, 247, 0.2)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",zIndex:"30"},title:o?"Switching theme...":"light"===r?"Switch to dark mode":"Switch to light mode","aria-label":o?"Switching theme...":"light"===r?"Switch to dark mode":"Switch to light mode",children:a.jsx("div",{className:"relative z-10 flex items-center justify-center",children:o?a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"}),a.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-purple-300 rounded-full animate-spin animation-delay-200"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`\n              transition-all duration-500 transform\n              ${"light"===r?"rotate-0 opacity-100":"rotate-180 opacity-0 absolute"}\n            `,children:a.jsx("svg",{className:`${n} drop-shadow-lg`,style:{color:"var(--color-text-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),a.jsx("div",{className:`\n              transition-all duration-500 transform\n              ${"dark"===r?"rotate-0 opacity-100":"rotate-180 opacity-0 absolute"}\n            `,children:a.jsx("svg",{className:`${n} drop-shadow-lg`,style:{color:"var(--color-text-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})]})})})},b=e=>{const a=[];return e?(e.length<8&&a.push("Password must be at least 8 characters long"),e.length>128&&a.push("Password cannot be longer than 128 characters"),/[A-Z]/.test(e)||a.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e)||a.push("Password must contain at least one lowercase letter"),/\d/.test(e)||a.push("Password must contain at least one number"),/[!@#$%^&*(),.?":{}|<>]/.test(e)||a.push("Password must contain at least one special character"),/(.)\1{2,}/.test(e)&&a.push("Password cannot contain repeating characters (3 or more times)"),/12345|qwerty|password|admin/i.test(e)&&a.push("Password contains a common pattern"),{isValid:0===a.length,errors:a}):{isValid:!1,errors:["Password is required"]}},f=[{id:"admin-1",email:"admin@hospitalfinance.com",name:"System Administrator",role:"admin",createdAt:"2024-01-15T08:00:00Z",lastLogin:"2024-12-15T10:30:00Z"},{id:"owner-1",email:"owner@metrogeneral.com",name:"Sarah Johnson",role:"hospital_owner",hospitalIds:["general-1","cardio-1"],createdAt:"2024-02-01T09:00:00Z",lastLogin:"2024-12-14T15:45:00Z"},{id:"owner-2",email:"owner@childrensmed.com",name:"Dr. Michael Chen",role:"hospital_owner",hospitalIds:["pediatric-1"],createdAt:"2024-02-15T10:00:00Z",lastLogin:"2024-12-13T12:20:00Z"},{id:"branch-1",email:"manager@metrogeneral.com",name:"John Doe",role:"branch_owner",hospitalId:"general-1",createdAt:"2024-03-01T11:00:00Z",lastLogin:"2024-12-15T08:15:00Z"},{id:"branch-2",email:"manager@heartcenter.com",name:"Dr. Emily Rodriguez",role:"branch_owner",hospitalId:"cardio-1",createdAt:"2024-03-10T12:00:00Z",lastLogin:"2024-12-14T16:30:00Z"},{id:"branch-3",email:"manager@childrensmed.com",name:"Lisa Thompson",role:"branch_owner",hospitalId:"pediatric-1",createdAt:"2024-03-20T13:00:00Z",lastLogin:"2024-12-12T14:45:00Z"},{id:"branch-4",email:"manager@traumacenter.com",name:"Dr. Robert Kim",role:"branch_owner",hospitalId:"trauma-1",createdAt:"2024-04-01T14:00:00Z",lastLogin:"2024-12-11T11:20:00Z"},{id:"admin-2",email:"usama@alviglobal.com",name:"Usama",role:"admin",createdAt:"2024-01-10T08:00:00Z",lastLogin:"2024-12-18T10:00:00Z"}],w={admin:{title:"System Administrator",description:"Full access to all hospitals and system-wide analytics",permissions:["View all hospitals","Manage users","System configuration"]},hospital_owner:{title:"Hospital Owner",description:"Access to owned hospitals across multiple locations",permissions:["Manage owned hospitals","View financial reports","Manage branch managers"]},branch_owner:{title:"Branch Manager",description:"Access to specific hospital location data only",permissions:["View branch data","Generate reports","Monitor performance"]}},y=(e,a)=>{r(t=>{a&&t.setExtras(a),s(e)})},j=(e,a,r)=>{t({message:e,category:a??"default",level:"info",data:r??{}})},k=new class{isDev=!1;formatMessage(e,a,t){const r=(new Date).toISOString(),s=t?.context?`[${t.context}]`:"";return`${r} ${e.toUpperCase()} ${s} ${a}`}log(e,a,t){if(this.isDev)switch(this.formatMessage(e,a,t),e){case"info":break;case"warn":j(a,t?.context,t?.data);break;case"error":this.handleProductionError(a,t?.data)}else"error"===e?this.handleProductionError(a,t?.data):j(a,t?.context,t?.data)}handleProductionError(e,a){a instanceof Error?y(a,{message:e}):y(new Error(e),{data:a})}info(e,a){this.log("info",e,a)}warn(e,a){this.log("warn",e,a)}error(e,a){this.log("error",e,a)}},N=[{id:"general-1",name:"Metro General Hospital",location:"Downtown",type:"General"},{id:"cardio-1",name:"Heart & Vascular Institute",location:"Midtown",type:"Specialty"},{id:"pediatric-1",name:"Children's Medical Center",location:"Westside",type:"Pediatric"},{id:"trauma-1",name:"Regional Trauma Center",location:"Northside",type:"Trauma"}],C=[2021,2022,2023,2024],S=(e,a=15)=>{const t=e*(a/100);return Math.round(e+2*(Math.random()-.5)*t)},L=[];N.forEach(e=>{C.forEach(a=>{const t=(2024===a?1:2023===a?.92:2022===a?.85:.78)*("General"===e.type?1:"Specialty"===e.type?.7:"Pediatric"===e.type?.5:.8),r={hospitalId:e.id,year:a,lastUpdated:new Date(a,11,31).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),financialMetrics:[{id:"total-revenue",title:"Total Revenue",value:S(125e5*t),change:S(8.5,50),changeType:Math.random()>.3?"increase":"decrease",period:"vs last month",format:"currency"},{id:"net-profit",title:"Net Profit",value:S(21e5*t),change:S(12.3,60),changeType:Math.random()>.25?"increase":"decrease",period:"vs last month",format:"currency"},{id:"profit-margin",title:"Profit Margin",value:S(16.8,25),change:S(2.1,80),changeType:Math.random()>.4?"increase":"decrease",period:"vs last month",format:"percentage"},{id:"operating-expenses",title:"Operating Expenses",value:S(98e5*t),change:S(3.2,40),changeType:Math.random()>.6?"increase":"decrease",period:"vs last month",format:"currency"}],revenueData:[{month:"Jan",revenue:S(85e5*t),expenses:S(62e5*t),netIncome:S(23e5*t)},{month:"Feb",revenue:S(92e5*t),expenses:S(71e5*t),netIncome:S(21e5*t)},{month:"Mar",revenue:S(156e5*t),expenses:S(118e5*t),netIncome:S(38e5*t)},{month:"Apr",revenue:S(78e5*t),expenses:S(59e5*t),netIncome:S(19e5*t)},{month:"May",revenue:S(182e5*t),expenses:S(135e5*t),netIncome:S(47e5*t)},{month:"Jun",revenue:S(69e5*t),expenses:S(54e5*t),netIncome:S(15e5*t)},{month:"Jul",revenue:S(214e5*t),expenses:S(158e5*t),netIncome:S(56e5*t)},{month:"Aug",revenue:S(112e5*t),expenses:S(86e5*t),netIncome:S(26e5*t)},{month:"Sep",revenue:S(168e5*t),expenses:S(122e5*t),netIncome:S(46e5*t)},{month:"Oct",revenue:S(96e5*t),expenses:S(73e5*t),netIncome:S(23e5*t)},{month:"Nov",revenue:S(195e5*t),expenses:S(141e5*t),netIncome:S(54e5*t)},{month:"Dec",revenue:S(137e5*t),expenses:S(102e5*t),netIncome:S(35e5*t)}],departmentFinances:(()=>{const a=S(32e5*t),r=S(24e5*t),s=a-r;return[{department:"Emergency",revenue:a,expenses:r,profit:s,profitMargin:s/a*100},(()=>{const e=S(45e5*t),a=S(31e5*t),r=e-a;return{department:"Surgery",revenue:e,expenses:a,profit:r,profitMargin:r/e*100}})(),(()=>{const e=S(28e5*t),a=S(19e5*t),r=e-a;return{department:"Cardiology",revenue:e,expenses:a,profit:r,profitMargin:r/e*100}})(),(()=>{const a=S(19e5*t),r=S(14e5*t),s=a-r;return{department:"Pediatric"===e.type?"Pediatrics":"Oncology",revenue:a,expenses:r,profit:s,profitMargin:s/a*100}})(),(()=>{const a=S(11e5*t),r=S(8e5*t),s=a-r;return{department:"Trauma"===e.type?"Trauma":"Orthopedics",revenue:a,expenses:r,profit:s,profitMargin:s/a*100}})()]})(),patientMetrics:{totalPatients:S(15420*t,20),inpatients:S(2180*t,25),outpatients:S(11850*t,20),emergencyVisits:S(1390*t,30),averageStayDuration:S(42,15)/10,occupancyRate:S(87.5,10)},expenseBreakdown:(()=>{const e=S(52e5*t),a=S(18e5*t),r=S(12e5*t),s=S(6e5*t),o=S(5e5*t),n=S(5e5*t),l=e+a+r+s+o+n;return[{category:"Salaries & Benefits",amount:e,percentage:Math.round(e/l*100*10)/10,color:"#f59e0b"},{category:"Medical Supplies",amount:a,percentage:Math.round(a/l*100*10)/10,color:"#3b82f6"},{category:"Equipment",amount:r,percentage:Math.round(r/l*100*10)/10,color:"#22c55e"},{category:"Utilities",amount:s,percentage:Math.round(s/l*100*10)/10,color:"#06b6d4"},{category:"Maintenance",amount:o,percentage:Math.round(o/l*100*10)/10,color:"#ef4444"},{category:"Other",amount:n,percentage:Math.round(n/l*100*10)/10,color:"#14b8a6"}]})(),cashFlowData:[{date:`${a}-01`,operatingCashFlow:S(21e5*t),investingCashFlow:S(-8e5*t),financingCashFlow:S(-3e5*t),netCashFlow:S(1e6*t)},{date:`${a}-02`,operatingCashFlow:S(195e4*t),investingCashFlow:S(-2e5*t),financingCashFlow:S(-4e5*t),netCashFlow:S(135e4*t)},{date:`${a}-03`,operatingCashFlow:S(23e5*t),investingCashFlow:S(-12e5*t),financingCashFlow:S(-2e5*t),netCashFlow:S(9e5*t)},{date:`${a}-04`,operatingCashFlow:S(22e5*t),investingCashFlow:S(-3e5*t),financingCashFlow:S(-35e4*t),netCashFlow:S(155e4*t)},{date:`${a}-05`,operatingCashFlow:S(25e5*t),investingCashFlow:S(-15e4*t),financingCashFlow:S(-3e5*t),netCashFlow:S(205e4*t)},{date:`${a}-06`,operatingCashFlow:S(235e4*t),investingCashFlow:S(-6e5*t),financingCashFlow:S(-25e4*t),netCashFlow:S(15e5*t)}]};L.push(r)})});const I=e.createContext(void 0),M=({children:t})=>{const[r,s]=e.useState(null),[o,n]=e.useState(!0);e.useEffect(()=>{const e=localStorage.getItem("hospitalFinanceUser");if(e)try{const a=JSON.parse(e);a&&"object"==typeof a&&"id"in a&&"email"in a?s(a):(k.warn("Invalid user data in localStorage, removing...",{context:"AuthContext"}),localStorage.removeItem("hospitalFinanceUser"))}catch(a){k.error("Failed to parse stored user data",{context:"AuthContext",data:a}),localStorage.removeItem("hospitalFinanceUser")}n(!1)},[]);const l={user:r,isAuthenticated:!!r,isLoading:o,signIn:async(e,a)=>{n(!0);try{const t=await(async(e,a)=>{await new Promise(e=>setTimeout(e,1e3));const t=b(a);if(!t.isValid)throw new Error(t.errors[0]);const r=f.find(a=>a.email===e);if(!r)throw new Error("No account found with this email address");const s=`login_attempts_${e}`,o=parseInt(localStorage.getItem(s)||"0");if(o>=5){const a=localStorage.getItem(`lockout_${e}`);if(a&&Date.now()-parseInt(a)<9e5)throw new Error("Account temporarily locked due to too many failed attempts. Try again in 15 minutes.");localStorage.removeItem(s),localStorage.removeItem(`lockout_${e}`)}if(!["UsamaHF2024!","OwnerMG2024!","ManagerMG2024!","Demo123!@#"].includes(a))throw localStorage.setItem(s,(o+1).toString()),o+1>=5&&localStorage.setItem(`lockout_${e}`,Date.now().toString()),new Error("Incorrect password");return localStorage.removeItem(s),localStorage.removeItem(`lockout_${e}`),r.lastLogin=(new Date).toISOString(),r})(e,a);if(!t||!t.id||!t.email)throw new Error("Invalid user data received from authentication service");s(t),localStorage.setItem("hospitalFinanceUser",JSON.stringify(t))}catch(t){throw k.error("Sign in failed",{context:"AuthContext",data:t}),t}finally{n(!1)}},signUp:async e=>{n(!0);try{const a=await(async e=>{if(await new Promise(e=>setTimeout(e,1200)),f.find(a=>a.email===e.email))throw new Error("User with this email already exists");const a={id:`user-${Date.now()}`,email:e.email,name:e.name,role:e.role,createdAt:(new Date).toISOString(),lastLogin:(new Date).toISOString(),...e.hospitalId&&{hospitalId:e.hospitalId},...e.hospitalIds&&{hospitalIds:e.hospitalIds}};return f.push(a),a})(e);if(!a||!a.id||!a.email)throw new Error("Invalid user data received from registration service");s(a),localStorage.setItem("hospitalFinanceUser",JSON.stringify(a))}catch(a){throw k.error("Sign up failed",{context:"AuthContext",data:a}),a}finally{n(!1)}},signOut:()=>{k.info("User signed out",{context:"AuthContext",data:{userId:r?.id}}),s(null),localStorage.removeItem("hospitalFinanceUser")},canAccessHospital:e=>{if(!r)return!1;switch(r.role){case"admin":return!0;case"hospital_owner":return r.hospitalIds?.includes(e)||!1;case"branch_owner":return r.hospitalId===e;default:return!1}},getAccessibleHospitals:()=>{if(!r)return[];switch(r.role){case"admin":return N.map(e=>e.id);case"hospital_owner":return r.hospitalIds||[];case"branch_owner":return r.hospitalId?[r.hospitalId]:[];default:return[]}}};return a.jsx(I.Provider,{value:l,children:t})},z=()=>{const a=e.useContext(I);if(void 0===a)throw new Error("useAuth must be used within an AuthProvider");return a},F=e=>{const a=["a855f7","8b5cf6","c084fc","d8b4fe","9333ea","7c3aed","e9d5ff","f3e8ff","6b21a8","581c87","4c1d95","3b0764","2e1065","5b4b8a","4c3d7a"];let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return a[Math.abs(t)%a.length]||"a855f7"},E=({hospitals:t,selectedHospitalId:r,selectedYear:s,availableYears:o,onHospitalChange:n,onYearChange:l})=>{const{user:i,signOut:c}=z(),[d,m]=e.useState(!1),[h,u]=e.useState(!1),[x,g]=e.useState(!1),[b,f]=e.useState(r),[y,j]=e.useState(s);e.useEffect(()=>{f(r)},[r]),e.useEffect(()=>{j(s)},[s]);const k=b!==r||y!==s;e.useEffect(()=>(document.body.style.overflow=d?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[d]),e.useEffect(()=>{const e=e=>{const a=e.target;h&&!a.closest("[data-user-menu]")&&u(!1),x&&!a.closest("[data-filter-menu]")&&g(!1)};return(h||x)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[h,x]);const N=t.map(e=>({value:e.id,label:e.name,subtitle:`${e.type} • ${e.location}`})),C=o.map(e=>({value:e.toString(),label:e.toString()}));return a.jsxs("header",{className:"header-glass sticky top-0 z-40 border-b-0 relative",children:[a.jsx("div",{className:"page-container relative",style:{paddingTop:0,paddingBottom:0},children:a.jsxs("div",{className:"flex items-center justify-between min-h-16 py-4 gap-4 relative",children:[a.jsx("div",{className:"flex items-center min-w-0 flex-shrink",children:a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsx("div",{className:"relative flex-shrink-0",children:a.jsx("div",{className:"logo-container w-10 h-10 rounded-xl flex items-center justify-center animate-pulse-glow shadow-lg transition-all duration-300 interactive-element",children:a.jsxs("svg",{className:"w-5 h-5 relative z-10 drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"logo-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#a855f7"}),a.jsx("stop",{offset:"50%",stopColor:"#8b5cf6"}),a.jsx("stop",{offset:"100%",stopColor:"#c084fc"})]})}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]})})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"heading-4 truncate block sm:hidden",style:{color:"var(--color-text-primary)",marginBottom:"0",fontSize:"var(--text-lg)"},children:"Hospital Finance"}),a.jsx("h1",{className:"heading-4 truncate hidden sm:block",style:{color:"var(--color-text-primary)",marginBottom:"0"},children:"Hospital Financial Dashboard"}),a.jsx("p",{className:"text-caption hidden lg:block truncate",style:{color:"var(--color-text-muted)",marginBottom:"0"},children:"Real-time financial insights & analytics"})]})]})}),a.jsxs("div",{className:"hidden lg:flex items-center gap-3 flex-shrink-0",children:[a.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:a.jsxs("div",{className:"hidden xl:flex items-center gap-3 px-3 py-1.5 rounded-lg",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid var(--border-secondary)"},children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("svg",{className:"w-3 h-3",style:{color:"var(--color-text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),a.jsx("span",{className:"text-xs font-medium",style:{color:"var(--color-text-secondary)"},children:t.find(e=>e.id===r)?.name||"No Hospital"})]}),a.jsx("div",{className:"w-px h-4",style:{backgroundColor:"var(--border-secondary)"}}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("svg",{className:"w-3 h-3",style:{color:"var(--color-text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsx("span",{className:"text-xs font-medium",style:{color:"var(--color-text-secondary)"},children:s})]})]})}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0","data-filter-menu":!0,children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>g(!x),className:"btn-base btn-secondary btn-sm flex items-center gap-2","aria-label":"Open filters menu",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})}),a.jsx("span",{className:"hidden xl:inline",children:"Filters"}),a.jsx("svg",{className:"w-4 h-4 transition-transform",style:{transform:x?"rotate(180deg)":"rotate(0deg)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&a.jsxs("div",{className:"absolute left-0 top-full mt-2 min-w-max rounded-lg shadow-xl z-50 gradient-bg-primary",style:{backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",border:"1px solid var(--border-secondary)",borderRadius:"var(--radius-md)",minWidth:"320px"},children:[a.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-secondary)"},children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",style:{color:"var(--color-text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})}),a.jsx("span",{className:"text-sm font-medium",style:{color:"var(--color-text-primary)"},children:"Filter Data"})]})}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-overline block mb-2",style:{color:"var(--color-text-secondary)"},children:"Hospital"}),a.jsx(p,{options:N,value:b,onChange:f,placeholder:"Select Hospital",className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-overline block mb-2",style:{color:"var(--color-text-secondary)"},children:"Year"}),a.jsx(p,{options:C,value:y.toString(),onChange:e=>j(parseInt(e)),placeholder:"Select Year",className:"w-full"})]}),a.jsx("div",{className:"pt-2 border-t",style:{borderColor:"var(--border-secondary)"},children:a.jsxs("button",{onClick:()=>{n(b),l(y),g(!1)},disabled:!k,className:`w-full btn-base ${k?"btn-primary":"btn-secondary opacity-50 cursor-not-allowed"} btn-sm`,"aria-label":"Apply selected filters",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Apply Filters"]})})]})]})]}),a.jsxs("button",{className:"btn-base btn-primary btn-sm","aria-label":"Generate AI-powered financial analysis",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:a.jsx("path",{d:"M7.657 6.247c.11-.33.576-.33.686 0l.645 1.937a2.89 2.89 0 0 0 1.829 1.828l1.936.645c.33.11.33.576 0 .686l-1.937.645a2.89 2.89 0 0 0-1.828 1.829l-.645 1.936a.361.361 0 0 1-.686 0l-.645-1.937a2.89 2.89 0 0 0-1.828-1.828l-1.937-.645a.361.361 0 0 1 0-.686l1.937-.645a2.89 2.89 0 0 0 1.828-1.828zM3.794 1.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387A1.73 1.73 0 0 0 4.593 5.69l-.387 1.162a.217.217 0 0 1-.412 0L3.407 5.69A1.73 1.73 0 0 0 2.31 4.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387A1.73 1.73 0 0 0 3.407 2.31zM10.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732L9.1 2.137a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"})}),a.jsx("span",{className:"hidden xl:inline ml-2",children:"Generate Analysis"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsx(v,{}),i&&a.jsxs("div",{className:"relative","data-user-menu":!0,children:[a.jsxs("button",{onClick:()=>u(!h),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-white/5 transition-colors interactive","aria-label":"User menu",children:[a.jsx("div",{className:"avatar-circle w-8 h-8 border-2 shadow-lg bg-white/10 backdrop-blur-sm",style:{borderColor:"var(--border-secondary)"},children:a.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(i.name)}&size=32&background=${F(i.name)}&color=ffffff&bold=true&format=png`,alt:`${i.name} profile picture`,loading:"lazy"})}),a.jsx("svg",{className:"w-4 h-4 transition-transform",style:{color:"var(--color-text-secondary)",transform:h?"rotate(180deg)":"rotate(0deg)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 min-w-max rounded-lg shadow-xl z-50 gradient-bg-primary",style:{backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",border:"1px solid var(--border-secondary)",borderRadius:"var(--radius-md)"},children:[a.jsxs("div",{className:"px-3 py-2.5 border-b",style:{borderColor:"var(--border-secondary)"},children:[a.jsx("p",{className:"text-sm font-medium whitespace-nowrap",style:{color:"var(--color-text-primary)"},children:i.name}),a.jsx("p",{className:"text-xs whitespace-nowrap",style:{color:"var(--color-text-muted)"},children:w[i.role]?.title||i.role})]}),a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{u(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 transition-colors flex items-center gap-2 whitespace-nowrap",style:{color:"var(--color-text-primary)"},"aria-label":"Export financial report",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Report"]}),a.jsxs("button",{onClick:()=>{c(),u(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 transition-colors flex items-center gap-2 whitespace-nowrap",style:{color:"var(--color-text-primary)"},children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})]})]})]})]}),a.jsxs("div",{className:"lg:hidden flex items-center gap-3 flex-shrink-0",children:[a.jsx(v,{size:"sm"}),a.jsx("button",{onClick:()=>m(!d),className:"btn-base btn-secondary btn-sm w-12 h-12 flex items-center justify-center rounded-xl transition-all duration-300 hover:scale-105","aria-label":d?"Close mobile menu":"Open mobile menu",style:{background:"linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(168, 85, 247, 0.2)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:a.jsx("svg",{className:"w-5 h-5 transition-transform duration-300",style:{transform:d?"rotate(90deg)":"rotate(0deg)",color:"var(--color-text-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})}),a.jsxs("div",{className:"xl:hidden fixed inset-0 transition-transform duration-300 ease-in-out "+(d?"translate-x-0":"translate-x-full"),id:"mobile-menu",style:{width:"100vw",height:"100vh",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.98) 0%, rgba(168, 85, 247, 0.98) 50%, rgba(196, 132, 252, 0.98) 100%)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999},children:[a.jsxs("div",{className:"flex items-center justify-between py-4",style:{paddingLeft:"var(--space-4)",paddingRight:"var(--space-4)"},children:[a.jsx("div",{className:"flex items-center min-w-0 flex-shrink",children:a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsx("div",{className:"relative flex-shrink-0",children:a.jsx("div",{className:"logo-container w-10 h-10 rounded-xl flex items-center justify-center animate-pulse-glow shadow-lg transition-all duration-300 interactive-element",children:a.jsxs("svg",{className:"w-5 h-5 relative z-10 drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"logo-gradient-sidemenu",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#a855f7"}),a.jsx("stop",{offset:"50%",stopColor:"#8b5cf6"}),a.jsx("stop",{offset:"100%",stopColor:"#c084fc"})]})}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]})})}),a.jsx("div",{className:"min-w-0",children:a.jsx("h1",{className:"heading-4 truncate",style:{color:"var(--color-text-primary)",marginBottom:"0",fontSize:"var(--text-lg)"},children:"Hospital Finance"})})]})}),a.jsx("button",{onClick:()=>m(!1),className:"btn-base btn-secondary btn-sm w-12 h-12 rounded-xl transition-all duration-300 hover:scale-105 flex items-center justify-center","aria-label":"Close menu",children:a.jsx("svg",{className:"w-5 h-5 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex flex-col h-full w-full",style:{paddingLeft:"var(--space-4)",paddingRight:"var(--space-4)"},children:a.jsxs("div",{className:"flex-1 overflow-y-auto py-4 space-y-6 w-full",children:[a.jsxs("div",{className:"rounded-2xl p-6 border",style:{borderColor:"var(--border-secondary)"},children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"avatar-gradient-border w-16 h-16 rounded-full p-0.5 shadow-2xl",children:a.jsx("div",{className:"avatar-circle w-full h-full rounded-full",style:{backgroundColor:"#ffffff"},children:a.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(i?.name||"")}&size=60&background=${F(i?.name||"")}&color=ffffff&bold=true&format=png`,alt:`${i?.name} profile picture`,loading:"lazy",className:"rounded-full"})})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-bold text-lg truncate",style:{color:"var(--color-text-primary)"},children:i?.name}),a.jsx("p",{className:"text-sm text-white truncate font-medium",children:i?.role&&w[i.role]?.title||i?.role?.replace("_"," ")})]})]}),a.jsxs("button",{onClick:c,className:"btn-base btn-secondary btn-md w-full flex items-center justify-center group","aria-label":"Sign out of your account",children:[a.jsx("svg",{className:"w-5 h-5 mr-3 group-hover:rotate-12 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("button",{className:"btn-base btn-secondary btn-sm w-full flex items-center justify-center","aria-label":"Export financial report",onClick:()=>m(!1),children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Report"]}),a.jsxs("button",{className:"btn-base btn-secondary btn-sm w-full flex items-center justify-center","aria-label":"Generate AI-powered financial analysis",onClick:()=>m(!1),children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 16 16",children:a.jsx("path",{d:"M7.657 6.247c.11-.33.576-.33.686 0l.645 1.937a2.89 2.89 0 0 0 1.829 1.828l1.936.645c.33.11.33.576 0 .686l-1.937.645a2.89 2.89 0 0 0-1.828 1.829l-.645 1.936a.361.361 0 0 1-.686 0l-.645-1.937a2.89 2.89 0 0 0-1.828-1.828l-1.937-.645a.361.361 0 0 1 0-.686l1.937-.645a2.89 2.89 0 0 0 1.828-1.828zM3.794 1.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387A1.73 1.73 0 0 0 4.593 5.69l-.387 1.162a.217.217 0 0 1-.412 0L3.407 5.69A1.73 1.73 0 0 0 2.31 4.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387A1.73 1.73 0 0 0 3.407 2.31zM10.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732L9.1 2.137a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"})}),"Generate Analysis"]})]})})]})})]})]})},A=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),P=e=>`${e.toFixed(1)}%`,H=e=>new Intl.NumberFormat("en-US").format(e),T=({metric:e})=>{const t=(e,a)=>{switch(a){case"currency":return A(e);case"percentage":return P(e);case"number":return H(e);default:return e.toString()}};return a.jsxs("div",{className:"glass-card interactive animate-float group",style:{padding:"var(--space-4) var(--space-5)"},role:"article","aria-labelledby":`metric-title-${e.id}`,"aria-describedby":`metric-change-${e.id}`,children:[a.jsx("div",{className:"flex items-center justify-between",style:{marginBottom:"var(--space-4)"},children:a.jsx("h3",{id:`metric-title-${e.id}`,className:"text-secondary font-semibold uppercase tracking-wider",style:{fontSize:"var(--text-sm)"},children:e.title})}),a.jsx("div",{style:{marginBottom:"var(--space-4)"},children:a.jsx("p",{className:"text-primary font-bold group-hover:scale-105 transition-transform duration-300",style:{fontSize:"clamp(1.25rem, 3vw, 2rem)",lineHeight:"var(--line-height-tight)",marginBottom:"var(--space-1)",wordSpacing:"-0.05em",letterSpacing:"-0.025em"},"aria-label":`${e.title} value: ${t(e.value,e.format)}`,children:t(e.value,e.format)})}),a.jsxs("div",{className:"flex items-center justify-between flex-wrap",style:{gap:"var(--space-2)"},children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("span",{id:`metric-change-${e.id}`,className:"flex items-center font-medium transition-colors "+("increase"===e.changeType?"text-green-400 hover:text-green-300":"text-red-400 hover:text-red-300"),style:{fontSize:"var(--text-base)"},"aria-label":`${"increase"===e.changeType?"Increased":"Decreased"} by ${P(e.change)} ${e.period}`,children:[a.jsx("span",{className:"transform group-hover:scale-110 transition-transform",style:{marginRight:"var(--space-2)"},"aria-hidden":"true",children:(r=e.changeType,"increase"===r?"↗":"↘")}),P(e.change)]})}),a.jsx("span",{className:"text-tertiary font-medium uppercase tracking-wide",style:{fontSize:"var(--text-sm)"},children:e.period})]})]});var r},B=({size:e="md",text:t="Loading...",subtext:r,className:s=""})=>{const o={sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"}[e];return a.jsx("div",{className:`flex items-center justify-center p-4 ${s}`,role:"status","aria-live":"polite",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`animate-spin rounded-full ${o} mx-auto mb-4`,style:{borderWidth:"2px",borderStyle:"solid",borderColor:"transparent",borderBottomColor:"rgba(255, 255, 255, 0.8)"},"aria-hidden":"true"}),t&&a.jsx("p",{className:"font-medium text-sm sm:text-base",style:{color:"rgba(255, 255, 255, 0.9)"},children:t}),r&&a.jsx("p",{className:"text-xs sm:text-sm mt-1 max-w-xs mx-auto",style:{color:"rgba(255, 255, 255, 0.7)"},children:r})]})})},D=({hospitals:e,selectedHospitalId:t,selectedYear:r,availableYears:s,onHospitalChange:o,onYearChange:n})=>{const l=e.find(e=>e.id===t);return a.jsxs("div",{className:"text-white dark:text-white",children:[a.jsx(E,{hospitals:e,selectedHospitalId:t,selectedYear:r,availableYears:s,onHospitalChange:o,onYearChange:n}),a.jsx("main",{children:a.jsx(B,{size:"md",text:"Loading dashboard data...",subtext:l?`${l.name} • ${r}`:"",className:"min-h-96"})})]})},$=({hospitals:e,selectedHospitalId:t,selectedYear:r,availableYears:s,onHospitalChange:o,onYearChange:n})=>a.jsxs("div",{className:"text-white dark:text-white",children:[a.jsx(E,{hospitals:e,selectedHospitalId:t,selectedYear:r,availableYears:s,onHospitalChange:o,onYearChange:n}),a.jsx("main",{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"mb-4",style:{color:"var(--color-text-muted)"},children:a.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--color-text-primary)"},children:"No Data Available"}),a.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"No financial data found for the selected hospital and year combination."}),a.jsx("p",{className:"text-sm mt-2",style:{color:"var(--color-text-muted)"},children:"Please select a different hospital or year."})]})})]}),_=e.lazy(()=>h(()=>import("./RevenueChart-BbB-I8rM.js"),__vite__mapDeps([0,1,2,3]))),W=e.lazy(()=>h(()=>import("./ExpensePieChart-D4CnEneA.js"),__vite__mapDeps([4,1,3]))),V=e.lazy(()=>h(()=>import("./CashFlowChart-DJeNNp0R.js"),__vite__mapDeps([5,1,2]))),O=e.lazy(()=>h(()=>import("./PatientMetricsCard-B-v2oTkH.js"),__vite__mapDeps([6,1]))),Y=e.lazy(()=>h(()=>import("./DepartmentTable-CxVvcTTp.js"),__vite__mapDeps([7,1]))),R=()=>{const{user:t,signOut:r,getAccessibleHospitals:s,canAccessHospital:o}=z(),n=s(),l=e.useMemo(()=>N.filter(e=>n.includes(e.id)),[n]),[i,c]=e.useState(n[0]||""),[d,m]=e.useState(2024),[h,u]=e.useState(null),[x,g]=e.useState(!0),[v,b]=e.useState(!1);e.useEffect(()=>{let e;return i&&d&&(g(!0),k.info("Loading dashboard data",{context:"Dashboard",data:{hospitalId:i,year:d}}),e=setTimeout(()=>{const e=(a=i,t=d,L.find(e=>e.hospitalId===a&&e.year===t));var a,t;e||k.warn("No data available for hospital and year",{context:"Dashboard",data:{hospitalId:i,year:d}}),u(e||null),g(!1)},500)),()=>{e&&clearTimeout(e)}},[i,d]);const f=e.useCallback(e=>{o(e)?(k.info("Hospital selection changed",{context:"Dashboard",data:{hospitalId:e}}),c(e)):k.warn("Unauthorized hospital access attempt",{context:"Dashboard",data:{hospitalId:e,userId:t?.id}})},[o,t?.id]),w=e.useCallback(e=>{k.info("Year selection changed",{context:"Dashboard",data:{year:e,previousYear:d}}),m(e)},[d]),y=e.useMemo(()=>l.map(e=>({value:e.id,label:e.name,subtitle:`${e.type} • ${e.location}`})),[l]),j=e.useMemo(()=>C.map(e=>({value:e.toString(),label:e.toString()})),[]);return x?a.jsx(D,{hospitals:l,selectedHospitalId:i,selectedYear:d,availableYears:C,onHospitalChange:f,onYearChange:w,user:t,signOut:r}):h?a.jsxs("div",{className:"min-h-screen text-white dark:text-white relative",children:[a.jsx(E,{hospitals:l,selectedHospitalId:i,selectedYear:d,availableYears:C,onHospitalChange:f,onYearChange:w}),a.jsx("main",{className:"mobile-safe-area",children:a.jsxs("div",{className:"page-container",children:[a.jsxs("div",{className:"xl:hidden mb-4 relative z-20",children:[a.jsxs("button",{onClick:()=>b(!v),className:"btn-base btn-primary btn-md w-full flex items-center justify-center gap-3","aria-expanded":v,"aria-controls":"mobile-filter-panel",children:[a.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),a.jsxs("span",{className:"font-medium",style:{lineHeight:"var(--line-height-snug)"},children:[v?"Hide":"Show"," Filters"]})]}),v&&a.jsx("div",{id:"mobile-filter-panel",className:"mt-4 glass-card-elevated rounded-2xl component-spacing relative z-20",children:a.jsxs("div",{className:"flex flex-col gap-6 relative z-20",children:[a.jsxs("div",{className:"relative z-30",children:[a.jsx("label",{className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-3)",display:"block"},children:"Hospital"}),a.jsx(p,{options:y,value:i,onChange:f,placeholder:"Select Hospital",className:"w-full"})]}),a.jsxs("div",{className:"relative z-20",style:{overflow:"visible"},children:[a.jsx("label",{className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-3)",display:"block"},children:"Year"}),a.jsx(p,{options:j,value:d.toString(),onChange:e=>w(parseInt(e)),placeholder:"Select Year",className:"w-full"})]})]})})]}),a.jsxs("section",{"aria-labelledby":"kpi-heading",className:"section-spacing",children:[a.jsx("h2",{id:"kpi-heading",className:"heading-2 text-center mb-10",children:"Key Performance Indicators"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-responsive-md",children:h.financialMetrics.map(e=>a.jsx(T,{metric:e},e.id))})]}),a.jsxs(e.Suspense,{fallback:a.jsx(B,{text:"Loading charts..."}),children:[a.jsxs("section",{className:"section-spacing","aria-labelledby":"charts-heading",children:[a.jsx("h2",{id:"charts-heading",className:"sr-only",children:"Financial Data Visualization"}),a.jsx("div",{className:"w-full mb-8",children:a.jsx(_,{data:h.revenueData,availableYears:C})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-responsive-md",children:[a.jsx(W,{data:h.expenseBreakdown}),a.jsx(V,{data:h.cashFlowData})]})]}),a.jsxs("section",{className:"section-spacing","aria-labelledby":"patient-metrics-heading",children:[a.jsx("h2",{id:"patient-metrics-heading",className:"sr-only",children:"Patient Metrics"}),a.jsx(O,{metrics:h.patientMetrics})]}),a.jsxs("section",{className:"section-spacing","aria-labelledby":"department-performance-heading",children:[a.jsx("h2",{id:"department-performance-heading",className:"sr-only",children:"Department Performance"}),a.jsx(Y,{departments:h.departmentFinances})]})]}),a.jsx("footer",{className:"section-spacing",children:a.jsx("div",{className:"chart-container footer-card",style:{borderRadius:"var(--radius-lg)"},children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center sm:justify-between gap-4 text-center sm:text-left",children:[a.jsxs("p",{className:"text-tertiary font-medium",style:{fontSize:"var(--text-base)",lineHeight:"1.4",margin:0},children:["© 2024 Hospital Finance Dashboard.",a.jsx("br",{}),"All rights reserved."]}),a.jsxs("p",{className:"text-tertiary font-medium sm:text-right sm:whitespace-nowrap",style:{fontSize:"var(--text-sm)",lineHeight:"1.4",margin:0},children:["Last updated: ",h.lastUpdated]})]})})})]})})]}):a.jsx($,{hospitals:l,selectedHospitalId:i,selectedYear:d,availableYears:C,onHospitalChange:f,onYearChange:w,user:t,signOut:r})},U=e=>"string"!=typeof e?"":e.replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/<iframe[^>]*>.*?<\/iframe>/gi,"").replace(/<object[^>]*>.*?<\/object>/gi,"").replace(/<embed[^>]*>.*?<\/embed>/gi,"").replace(/<link[^>]*>.*?<\/link>/gi,"").replace(/<meta[^>]*>.*?<\/meta>/gi,"").replace(/javascript:/gi,"").replace(/vbscript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/<[^>]*>/g,"").trim();n().email("Invalid email format").min(1).max(255),n().min(8,"Password must be at least 8 characters").max(128,"Password must be no more than 128 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),n().min(1,"Name is required").max(100,"Name must be no more than 100 characters"),i(["admin","hospital_owner","branch_owner"]),n().min(1,"Hospital ID is required").max(50,"Hospital ID must be no more than 50 characters"),o({email:n().email("Invalid email address"),password:n().min(8,"Password must be at least 8 characters long").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/\d/,"Password must contain at least one number").regex(/[!@#$%^&*(),.?":{}|<>]/,"Password must contain at least one special character"),name:n().min(2,"Name must be at least 2 characters long").max(100,"Name must be no more than 100 characters"),role:i(["admin","hospital_owner","branch_owner"]),hospitalId:n().min(1,"Hospital ID is required").max(50,"Hospital ID must be no more than 50 characters").optional(),hospitalIds:l(n().min(1,"Hospital ID is required").max(50,"Hospital ID must be no more than 50 characters")).optional()}),o({email:n().email("Invalid email address"),password:n().min(1,"Password is required")});const Z=({variant:e="primary",size:t="md",isLoading:r=!1,fullWidth:s=!1,className:o="",children:n,disabled:l,...i})=>{const c=`\n    btn-base\n    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent\n    disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\n   ${{primary:"\n      btn-primary\n      focus:ring-purple-400/50\n    ",secondary:"\n      btn-secondary\n      focus:ring-purple-300/50\n    ",danger:"\n      btn-danger\n      focus:ring-purple-500/50\n    ",ghost:"\n      btn-ghost\n      focus:ring-purple-300/50\n    "}[e]} ${{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[t]} ${s?"w-full":""} ${o}`.trim();return a.jsx("button",{className:c,disabled:l||r,"aria-busy":r,"aria-disabled":l||r,...i,children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white/30 border-t-white mr-3"}),a.jsx("span",{style:{color:"white"},children:"Loading..."})]}):n})};class q extends e.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){const t=(e=>({name:U(e.name),message:U(e.message),stack:e.stack?U(e.stack):void 0,timestamp:(new Date).toISOString()}))(e);k.error("Uncaught error in component",{context:"ErrorBoundary",data:{error:t,componentStack:a.componentStack}}),this.setState({error:e,errorInfo:a})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsxs("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%)"},children:[a.jsx("div",{className:"animated-blob-bg",children:a.jsx("div",{className:"blob blob-center"})}),a.jsx("div",{className:"max-w-md w-full mx-4 relative z-10",children:a.jsxs("div",{className:"glass-card rounded-xl p-8 text-center",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"},children:[a.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)"},children:a.jsx("svg",{className:"w-8 h-8",style:{color:"#ef4444"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-white/70 mb-6",children:"We encountered an unexpected error. Please try refreshing the page or contact support if the problem persists."}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Z,{onClick:()=>window.location.reload(),fullWidth:!0,children:"Refresh Page"}),a.jsx(Z,{onClick:()=>this.setState({hasError:!1}),variant:"secondary",fullWidth:!0,children:"Try Again"})]}),!1]})})]}):this.props.children}}const G=[{role:"Admin",email:"admin@hospitalfinance.com",password:"UsamaHF2024!"},{role:"Hospital Owner",email:"owner@metrogeneral.com",password:"OwnerMG2024!"},{role:"Branch Manager",email:"manager@metrogeneral.com",password:"ManagerMG2024!"}],J=({onSwitchToSignUp:t})=>{const[r,s]=e.useState(""),[o,n]=e.useState(""),[l,i]=e.useState(!1),[c,d]=e.useState(""),{signIn:m,isLoading:h}=z(),{resolvedTheme:p}=g();return a.jsxs("div",{className:"min-h-screen text-white dark:text-white relative flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden",children:a.jsx("div",{className:"blob-container",children:a.jsx("div",{className:"blob blob-center"})})}),a.jsxs("div",{className:"max-w-md w-full relative z-10",children:[a.jsxs("div",{className:"text-center mb-8 animate-fade-in-down",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center animate-pulse-glow shadow-lg transition-all duration-300 interactive-element",style:{background:"light"===p?"white":"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(168, 85, 247, 0.3))",border:"light"===p?"2px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsxs("svg",{className:"w-8 h-8 relative z-10 drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"logo-gradient-signin",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#a855f7"}),a.jsx("stop",{offset:"50%",stopColor:"#8b5cf6"}),a.jsx("stop",{offset:"100%",stopColor:"#c084fc"})]})}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,stroke:"light"===p?"url(#logo-gradient-signin)":"white",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]})})}),a.jsx("h2",{className:"text-3xl font-bold tracking-tight",style:{color:"var(--color-text-primary)"},children:"Welcome back"}),a.jsx("p",{className:"mt-2",style:{color:"var(--color-text-secondary)"},children:"Sign in to your Hospital Finance Dashboard"})]}),a.jsxs("div",{className:"glass-card rounded-xl mb-6 animate-fade-in-up",style:{padding:"var(--space-4)"},children:[a.jsx("h3",{className:"text-sm font-medium mb-3 text-center",style:{color:"var(--color-text-secondary)"},children:"Quick Demo Access:"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:G.map((e,t)=>a.jsx("button",{onClick:()=>{return a=e.email,t=e.password,s(a),void n(t);var a,t},className:"btn-base btn-secondary btn-sm text-xs interactive",children:a.jsx("span",{className:"capitalize font-medium",children:e.role.replace("_"," ")})},t))})]}),a.jsxs("div",{className:"glass-card rounded-xl animate-fade-in-up animation-delay-200 component-spacing-lg",children:[a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d("");const a=b(o);if(a.isValid)try{k.info("Sign in attempt",{context:"SignInPage",data:{email:r}}),await m(r,o),k.info("Sign in successful",{context:"SignInPage",data:{email:r}})}catch(t){k.error("Sign in failed",{context:"SignInPage",data:{email:r,error:t}}),d((e=>e instanceof Error?e.message.includes("Invalid credentials")?"Invalid email or password":e.message.includes("Rate limit")?"Too many attempts. Please try again later":"An error occurred during authentication":"An unexpected error occurred")(t))}else d(a.errors[0]||"Invalid password")},className:"flex flex-col gap-6",children:[c&&a.jsx("div",{className:"glass-card rounded-lg p-4",style:{background:"linear-gradient(145deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.3)",color:"rgba(239, 68, 68, 0.9)"},children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),a.jsx("span",{className:"body-small font-medium",children:c})]})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-2)",display:"block"},children:"Email Address"}),a.jsx("input",{id:"email",type:"email",required:!0,value:r,onChange:e=>s(e.target.value),placeholder:"Enter your email",className:"w-full px-4 py-3 rounded-lg border-0 bg-white/10 backdrop-blur-sm text-white placeholder-white/50 form-input-focus interactive",style:{border:"1px solid var(--border-secondary)"}})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-2)",display:"block"},children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:l?"text":"password",required:!0,value:o,onChange:e=>n(e.target.value),placeholder:"Enter your password",className:"w-full px-4 py-3 pr-12 rounded-lg border-0 bg-white/10 backdrop-blur-sm text-white placeholder-white/50 form-input-focus interactive",style:{border:"1px solid var(--border-secondary)"}}),a.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors","aria-label":l?"Hide password":"Show password",children:l?a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]}),a.jsx("button",{type:"submit",disabled:h,className:"btn-base btn-primary btn-lg w-full",children:h?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),a.jsx("span",{style:{color:"white"},children:"Signing In..."})]}):"Sign In"})]}),a.jsx("div",{className:"mt-6",children:a.jsxs("div",{className:"glass-card rounded-lg p-4",children:[a.jsx("p",{className:"text-sm mb-3 text-center",style:{color:"var(--color-text-secondary)"},children:"Don't have an account?"}),a.jsxs("button",{type:"button",onClick:t,className:"btn-base btn-secondary btn-md w-full interactive",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Create Account"]})]})})]}),a.jsx("div",{className:"text-center text-xs mt-8 animate-fade-in-up animation-delay-400",style:{color:"var(--color-text-muted)"},children:a.jsxs("p",{children:["© 2024 Hospital Finance Dashboard.",a.jsx("br",{}),"All rights reserved."]})})]})]})},K=({onSwitchToSignIn:t})=>{const[r,s]=e.useState({name:"",email:"",password:"",confirmPassword:"",role:"branch_owner",hospitalId:"",hospitalIds:[]}),[o,n]=e.useState(""),[l,i]=e.useState(!1),[c,d]=e.useState(!1),{signUp:m,isLoading:h}=z(),{resolvedTheme:u}=g(),x=(e,a)=>{s(t=>({...t,[e]:a}))};return a.jsxs("div",{className:"min-h-screen text-white dark:text-white relative flex items-center justify-center py-6 sm:py-12 px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden",children:a.jsx("div",{className:"blob-container",children:a.jsx("div",{className:"blob blob-center"})})}),a.jsxs("div",{className:"max-w-lg w-full relative z-10",children:[a.jsxs("div",{className:"text-center mb-8 animate-fade-in-down",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center animate-pulse-glow shadow-lg transition-all duration-300 interactive-element",style:{background:"light"===u?"white":"linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(168, 85, 247, 0.3))",border:"light"===u?"2px solid rgba(139, 92, 246, 0.2)":"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsxs("svg",{className:"w-8 h-8 relative z-10 drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"logo-gradient-signup",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#a855f7"}),a.jsx("stop",{offset:"50%",stopColor:"#8b5cf6"}),a.jsx("stop",{offset:"100%",stopColor:"#c084fc"})]})}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,stroke:"light"===u?"url(#logo-gradient-signup)":"white",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]})})}),a.jsx("h2",{className:"text-3xl font-bold tracking-tight",style:{color:"var(--color-text-primary)"},children:"Create an Account"}),a.jsx("p",{className:"mt-2",style:{color:"var(--color-text-secondary)"},children:"Join the Hospital Finance Dashboard"})]}),a.jsx("div",{className:"glass-card rounded-xl animate-fade-in-up component-spacing-lg",children:a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),n(""),r.password===r.confirmPassword)if(r.password.length<6)n("Password must be at least 6 characters long");else if("branch_owner"!==r.role||r.hospitalId)if("hospital_owner"!==r.role||0!==r.hospitalIds.length)try{const e={name:r.name,email:r.email,password:r.password,role:r.role};"branch_owner"===r.role&&r.hospitalId&&(e.hospitalId=r.hospitalId),"hospital_owner"===r.role&&r.hospitalIds.length>0&&(e.hospitalIds=r.hospitalIds),await m(e)}catch(a){n(a instanceof Error?a.message:"An error occurred")}else n("Please select at least one hospital for hospital owner role");else n("Please select a hospital for branch manager role");else n("Passwords do not match")},className:"flex flex-col gap-6",children:[o&&a.jsx("div",{className:"glass-card rounded-lg",style:{padding:"var(--space-4)",background:"linear-gradient(145deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.3)",color:"rgba(239, 68, 68, 0.9)"},children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),a.jsx("span",{className:"body-small font-medium",children:o})]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-2)",display:"block"},children:"Full Name"}),a.jsx("input",{id:"name",type:"text",required:!0,value:r.name,onChange:e=>x("name",e.target.value),placeholder:"Enter your full name",className:"w-full px-4 py-3 rounded-lg border-0 bg-white/10 backdrop-blur-sm text-white placeholder-white/50 form-input-focus interactive",style:{border:"1px solid var(--border-secondary)"}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-2)",display:"block"},children:"Email Address"}),a.jsx("input",{id:"email",type:"email",required:!0,value:r.email,onChange:e=>x("email",e.target.value),placeholder:"Enter your email",className:"w-full px-4 py-3 rounded-lg border-0 bg-white/10 backdrop-blur-sm text-white placeholder-white/50 form-input-focus interactive",style:{border:"1px solid var(--border-secondary)"}})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-2)",display:"block"},children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:l?"text":"password",required:!0,value:r.password,onChange:e=>x("password",e.target.value),placeholder:"Create a password",className:"w-full px-4 py-3 pr-12 rounded-lg border-0 bg-white/10 backdrop-blur-sm text-white placeholder-white/50 form-input-focus interactive",style:{border:"1px solid var(--border-secondary)"}}),a.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors","aria-label":l?"Hide password":"Show password",children:l?a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-2)",display:"block"},children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",type:c?"text":"password",required:!0,value:r.confirmPassword,onChange:e=>x("confirmPassword",e.target.value),placeholder:"Confirm your password",className:"w-full px-4 py-3 pr-12 rounded-lg border-0 bg-white/10 backdrop-blur-sm text-white placeholder-white/50 form-input-focus interactive",style:{border:"1px solid var(--border-secondary)"}}),a.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors","aria-label":c?"Hide password":"Show password",children:c?a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-3)",display:"block"},children:"Account Type"}),a.jsx("div",{className:"flex flex-col gap-3",children:Object.keys(w).map(e=>a.jsx("div",{className:"glass-card rounded-lg p-3 interactive",style:{background:r.role===e?"rgba(139, 92, 246, 0.2)":"rgba(255, 255, 255, 0.05)",border:"1px solid "+(r.role===e?"var(--brand-primary)":"var(--border-secondary)"),opacity:"admin"===e?.5:1},children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{id:e,type:"radio",name:"role",value:e,checked:r.role===e,onChange:e=>x("role",e.target.value),className:"custom-radio mt-1",disabled:"admin"===e}),a.jsxs("div",{className:"ml-3",children:[a.jsxs("label",{htmlFor:e,className:"body-base font-medium form-label-interactive",style:{color:"var(--color-text-primary)",display:"block"},children:[w[e].title,"admin"===e&&a.jsx("span",{style:{color:"var(--color-text-muted)"},className:"ml-2",children:"(Contact admin)"})]}),a.jsx("p",{className:"text-xs mt-1",style:{color:"var(--color-text-muted)"},children:w[e].description})]})]})},e))})]}),"branch_owner"===r.role&&a.jsxs("div",{children:[a.jsx("label",{className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-2)",display:"block"},children:"Select Hospital"}),a.jsx(p,{options:N.map(e=>({value:e.id,label:e.name,subtitle:`${e.type} • ${e.location}`})),value:r.hospitalId,onChange:e=>x("hospitalId",e),placeholder:"Choose a hospital...",className:"w-full"})]}),"hospital_owner"===r.role&&a.jsxs("div",{children:[a.jsx("label",{className:"text-label",style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-2)",display:"block"},children:"Select Hospitals (you can select multiple)"}),a.jsx("div",{className:"flex flex-col gap-2 max-h-32 overflow-y-auto glass-card rounded-lg p-3",children:N.map(e=>a.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-white/5 transition-colors",children:[a.jsx("input",{id:`hospital-${e.id}`,type:"checkbox",checked:r.hospitalIds.includes(e.id),onChange:a=>{return t=e.id,r=a.target.checked,void s(r?e=>({...e,hospitalIds:[...e.hospitalIds,t]}):e=>({...e,hospitalIds:e.hospitalIds.filter(e=>e!==t)}));var t,r},className:"custom-checkbox"}),a.jsxs("label",{htmlFor:`hospital-${e.id}`,className:"ml-2 text-sm form-label-interactive",style:{color:"var(--color-text-primary)"},children:[e.name,a.jsxs("span",{style:{color:"var(--color-text-muted)"},className:"ml-1",children:["(",e.type," • ",e.location,")"]})]})]},e.id))})]}),a.jsx("button",{type:"submit",disabled:h,className:"btn-base btn-primary btn-lg w-full",children:h?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),a.jsx("span",{style:{color:"white"},children:"Creating Account..."})]}):"Create Account"}),a.jsx("div",{className:"mt-6",children:a.jsxs("div",{className:"glass-card rounded-lg p-4",children:[a.jsx("p",{className:"text-sm mb-3 text-center",style:{color:"var(--color-text-secondary)"},children:"Already have an account?"}),a.jsxs("button",{type:"button",onClick:t,className:"btn-base btn-secondary btn-md w-full interactive",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign In"]})]})})]})}),a.jsx("div",{className:"text-center text-xs mt-8 animate-fade-in-up animation-delay-200",style:{color:"var(--color-text-muted)"},children:a.jsxs("p",{children:["© 2024 Hospital Finance Dashboard.",a.jsx("br",{}),"All rights reserved."]})})]})]})},Q=({children:t})=>{const[r,s]=e.useState(!1),{isAuthenticated:o,isLoading:n}=z();return n?a.jsx(B,{size:"md",text:"Loading...",className:"min-h-screen"}):o?a.jsx(a.Fragment,{children:t}):r?a.jsx(K,{onSwitchToSignIn:()=>s(!1)}):a.jsx(J,{onSwitchToSignUp:()=>s(!0)})};function X(){return a.jsx(q,{children:a.jsx(x,{children:a.jsx(M,{children:a.jsxs("div",{className:"App min-h-screen text-white dark:text-white transition-colors duration-300",children:[a.jsx("div",{className:"preload-themes absolute opacity-0 pointer-events-none -z-50","aria-hidden":"true",children:a.jsxs("div",{className:"glass-card btn-base btn-primary btn-secondary theme-toggle animate-pulse-glow",children:[a.jsx("div",{className:"dropdown-button dropdown-options gradient-bg-primary"}),a.jsx("div",{className:"logo-container logo-container-inverted"}),a.jsx("div",{className:"avatar-gradient-border performance-insight-card"})]})}),a.jsx("div",{className:"animated-blob-bg",children:a.jsx("div",{className:"blob blob-center"})}),a.jsx(Q,{children:a.jsx(e.Suspense,{fallback:a.jsx(B,{text:"Loading Dashboard...",className:"min-h-screen"}),children:a.jsx(R,{})})})]})})})})}const ee=document.getElementById("root");if(!ee)throw new Error('Failed to find root element. Check if the HTML includes a div with id="root"');c.createRoot(ee).render(a.jsx(d.StrictMode,{children:a.jsx(X,{})}));export{p as D,P as a,H as b,A as f,g as u};
//# sourceMappingURL=main-i-oZkPFD.js.map
