const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RevenueChart-CKd5IpGr.js","assets/vendor-AJSyh0cO.js","assets/useChartTheme-CRrHdiZn.js","assets/ChartNoData-C7Ezx331.js","assets/ExpensePieChart-XJZIn71i.js","assets/CashFlowChart-CrNhCvMH.js","assets/PatientMetricsCard-CLWSD3gV.js","assets/DepartmentTable-DF8UBQC7.js"])))=>i.map(i=>d[i]);
import{r as e,j as a,c as t,R as r}from"./vendor-AJSyh0cO.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const s={},n=function(e,a,t){let r=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=e?.nonce||e?.getAttribute("nonce");r=Promise.allSettled(a.map(e=>{if((e=function(e){return"/"+e}(e))in s)return;s[e]=!0;const a=e.endsWith(".css"),r=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=a?"stylesheet":"modulepreload",a||(n.as="script"),n.crossOrigin="",n.href=e,t&&n.setAttribute("nonce",t),document.head.appendChild(n),a?new Promise((a,t)=>{n.addEventListener("load",a),n.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=e,window.dispatchEvent(a),!a.defaultPrevented)throw e}return r.then(a=>{for(const e of a||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},o=({options:t,value:r,onChange:s,placeholder:n,className:o=""})=>{const[i,l]=e.useState(!1),d=e.useRef(null),c=t.find(e=>e.value===r);return e.useEffect(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),a.jsxs("div",{ref:d,className:`relative ${o}`,children:[a.jsx("button",{type:"button",className:"w-full bg-white dark:bg-dark-surface border border-gray-300 dark:border-dark-border rounded-lg px-4 py-3 text-left shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 hover:border-gray-400 dark:hover:border-gray-500 transition-all duration-200 transform hover:-translate-y-0.5",onClick:()=>{l(!i)},"aria-haspopup":"listbox","aria-expanded":i,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"min-w-0 flex-1",children:c?a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:c.label}),c.subtitle&&a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:c.subtitle})]}):a.jsx("span",{className:"text-gray-500 dark:text-gray-400 truncate",children:n})}),a.jsx("div",{className:"ml-2 flex-shrink-0",children:a.jsx("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-500 transition-transform duration-200 "+(i?"transform rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),a.jsx("div",{className:"absolute w-full mt-1 bg-white dark:bg-dark-surface border border-gray-200 dark:border-dark-border rounded-lg shadow-2xl max-h-60 overflow-auto transition-all duration-300 ease-in-out z-50 "+(i?"opacity-100 translate-y-0":"opacity-0 -translate-y-2 pointer-events-none"),role:"listbox",children:t.map(e=>a.jsx("button",{type:"button",className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:bg-gray-50 dark:focus:bg-gray-700 transition-colors duration-150 "+(e.value===r?"bg-primary-50 dark:bg-primary-900/20 border-r-2 border-primary-500":""),onClick:()=>{return a=e.value,s(a),void l(!1);var a},children:a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.label}),e.subtitle&&a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 truncate",children:e.subtitle})]})},e.value))})]})},i=e.createContext(void 0),l=({children:t})=>{const[r,s]=e.useState("auto"),[n,o]=e.useState("light"),l=e.useCallback(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),d=e.useCallback(e=>{const a=document.documentElement;a.classList.add("transitioning"),"dark"===e?a.classList.add("dark"):a.classList.remove("dark"),setTimeout(()=>{a.classList.remove("transitioning")},300)},[]),c=e.useCallback(e=>"auto"===e?l():e,[l]);e.useEffect(()=>{const e=localStorage.getItem("hospitalFinanceTheme")||"auto",a=c(e);s(e),o(a),d(a)},[c,d]),e.useEffect(()=>{const e=window.matchMedia("(prefers-color-scheme: dark)"),a=e=>{const a=e.matches?"dark":"light";"auto"===r&&(o(a),d(a))};return e.addEventListener("change",a),()=>e.removeEventListener("change",a)},[r,d]);const m=e.useCallback(e=>{const a=c(e);s(e),o(a),localStorage.setItem("hospitalFinanceTheme",e),d(a)},[c,d]),h=e.useCallback(()=>{m("auto"===r?"light"===n?"dark":"light":"light"===r?"dark":"light")},[r,n,m]),u={theme:r,resolvedTheme:n,toggleTheme:h,setTheme:m};return a.jsx(i.Provider,{value:u,children:t})},d=()=>{const a=e.useContext(i);if(void 0===a)throw new Error("useTheme must be used within a ThemeProvider. Make sure to wrap your component tree with <ThemeProvider>.");return a},c=({className:e="",size:t="md"})=>{const{resolvedTheme:r,setTheme:s}=d(),n={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[t];return a.jsx("button",{onClick:()=>s("light"===r?"dark":"light"),className:`\n        relative p-2 rounded-lg transition-all duration-200 \n        bg-gray-100 hover:bg-gray-200 \n        dark:bg-gray-700 dark:hover:bg-gray-600 \n        text-gray-700 dark:text-gray-300 \n        hover:text-gray-900 dark:hover:text-white\n        focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 \n        dark:focus:ring-offset-gray-800\n        hover:scale-105 active:scale-95\n        ${e}\n      `,title:"light"===r?"Switch to dark mode":"Switch to light mode","aria-label":"light"===r?"Switch to dark mode":"Switch to light mode",children:"light"===r?a.jsx("svg",{className:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):a.jsx("svg",{className:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})},m=e=>{const a=[];return e?(e.length<8&&a.push("Password must be at least 8 characters long"),e.length>128&&a.push("Password cannot be longer than 128 characters"),/[A-Z]/.test(e)||a.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e)||a.push("Password must contain at least one lowercase letter"),/\d/.test(e)||a.push("Password must contain at least one number"),/[!@#$%^&*(),.?":{}|<>]/.test(e)||a.push("Password must contain at least one special character"),/(.)\1{2,}/.test(e)&&a.push("Password cannot contain repeating characters (3 or more times)"),/12345|qwerty|password|admin/i.test(e)&&a.push("Password contains a common pattern"),{isValid:0===a.length,errors:a}):{isValid:!1,errors:["Password is required"]}},h=[{id:"admin-1",email:"admin@hospitalfinance.com",name:"System Administrator",role:"admin",createdAt:"2024-01-15T08:00:00Z",lastLogin:"2024-12-15T10:30:00Z"},{id:"owner-1",email:"owner@metrogeneral.com",name:"Sarah Johnson",role:"hospital_owner",hospitalIds:["general-1","cardio-1"],createdAt:"2024-02-01T09:00:00Z",lastLogin:"2024-12-14T15:45:00Z"},{id:"owner-2",email:"owner@childrensmed.com",name:"Dr. Michael Chen",role:"hospital_owner",hospitalIds:["pediatric-1"],createdAt:"2024-02-15T10:00:00Z",lastLogin:"2024-12-13T12:20:00Z"},{id:"branch-1",email:"manager@metrogeneral.com",name:"John Doe",role:"branch_owner",hospitalId:"general-1",createdAt:"2024-03-01T11:00:00Z",lastLogin:"2024-12-15T08:15:00Z"},{id:"branch-2",email:"manager@heartcenter.com",name:"Dr. Emily Rodriguez",role:"branch_owner",hospitalId:"cardio-1",createdAt:"2024-03-10T12:00:00Z",lastLogin:"2024-12-14T16:30:00Z"},{id:"branch-3",email:"manager@childrensmed.com",name:"Lisa Thompson",role:"branch_owner",hospitalId:"pediatric-1",createdAt:"2024-03-20T13:00:00Z",lastLogin:"2024-12-12T14:45:00Z"},{id:"branch-4",email:"manager@traumacenter.com",name:"Dr. Robert Kim",role:"branch_owner",hospitalId:"trauma-1",createdAt:"2024-04-01T14:00:00Z",lastLogin:"2024-12-11T11:20:00Z"}],u={admin:{title:"System Administrator",description:"Full access to all hospitals and system-wide analytics",permissions:["View all hospitals","Manage users","System configuration"]},hospital_owner:{title:"Hospital Owner",description:"Access to owned hospitals across multiple locations",permissions:["Manage owned hospitals","View financial reports","Manage branch managers"]},branch_owner:{title:"Branch Manager",description:"Access to specific hospital location data only",permissions:["View branch data","Generate reports","Monitor performance"]}},x=new class{isDev=!1;formatMessage(e,a,t){const r=(new Date).toISOString(),s=t?.context?`[${t.context}]`:"";return`${r} ${e.toUpperCase()} ${s} ${a}`}log(e,a,t){if(this.isDev||"error"===e)switch(this.formatMessage(e,a,t),e){case"info":case"warn":this.isDev;break;case"error":this.isDev||this.handleProductionError(a,t?.data)}}handleProductionError(e,a){}info(e,a){this.log("info",e,a)}warn(e,a){this.log("warn",e,a)}error(e,a){this.log("error",e,a)}},p=[{id:"general-1",name:"Metro General Hospital",location:"Downtown",type:"General"},{id:"cardio-1",name:"Heart & Vascular Institute",location:"Midtown",type:"Specialty"},{id:"pediatric-1",name:"Children's Medical Center",location:"Westside",type:"Pediatric"},{id:"trauma-1",name:"Regional Trauma Center",location:"Northside",type:"Trauma"}],g=[2021,2022,2023,2024],y=(e,a=15)=>{const t=e*(a/100);return Math.round(e+2*(Math.random()-.5)*t)},f=[];p.forEach(e=>{g.forEach(a=>{const t=(2024===a?1:2023===a?.92:2022===a?.85:.78)*("General"===e.type?1:"Specialty"===e.type?.7:"Pediatric"===e.type?.5:.8),r={hospitalId:e.id,year:a,lastUpdated:new Date(a,11,31).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),financialMetrics:[{id:"total-revenue",title:"Total Revenue",value:y(125e5*t),change:y(8.5,50),changeType:Math.random()>.3?"increase":"decrease",period:"vs last month",format:"currency"},{id:"net-profit",title:"Net Profit",value:y(21e5*t),change:y(12.3,60),changeType:Math.random()>.25?"increase":"decrease",period:"vs last month",format:"currency"},{id:"profit-margin",title:"Profit Margin",value:y(16.8,25),change:y(2.1,80),changeType:Math.random()>.4?"increase":"decrease",period:"vs last month",format:"percentage"},{id:"operating-expenses",title:"Operating Expenses",value:y(98e5*t),change:y(3.2,40),changeType:Math.random()>.6?"increase":"decrease",period:"vs last month",format:"currency"}],revenueData:[{month:"Jan",revenue:y(112e5*t),expenses:y(89e5*t),netIncome:y(23e5*t)},{month:"Feb",revenue:y(108e5*t),expenses:y(86e5*t),netIncome:y(22e5*t)},{month:"Mar",revenue:y(121e5*t),expenses:y(92e5*t),netIncome:y(29e5*t)},{month:"Apr",revenue:y(118e5*t),expenses:y(9e6*t),netIncome:y(28e5*t)},{month:"May",revenue:y(128e5*t),expenses:y(96e5*t),netIncome:y(32e5*t)},{month:"Jun",revenue:y(125e5*t),expenses:y(98e5*t),netIncome:y(27e5*t)},{month:"Jul",revenue:y(132e5*t),expenses:y(101e5*t),netIncome:y(31e5*t)},{month:"Aug",revenue:y(129e5*t),expenses:y(99e5*t),netIncome:y(3e6*t)},{month:"Sep",revenue:y(135e5*t),expenses:y(103e5*t),netIncome:y(32e5*t)},{month:"Oct",revenue:y(131e5*t),expenses:y(1e7*t),netIncome:y(31e5*t)},{month:"Nov",revenue:y(127e5*t),expenses:y(97e5*t),netIncome:y(3e6*t)},{month:"Dec",revenue:y(142e5*t),expenses:y(108e5*t),netIncome:y(34e5*t)}],departmentFinances:(()=>{const a=y(32e5*t),r=y(24e5*t),s=a-r;return[{department:"Emergency",revenue:a,expenses:r,profit:s,profitMargin:s/a*100},(()=>{const e=y(45e5*t),a=y(31e5*t),r=e-a;return{department:"Surgery",revenue:e,expenses:a,profit:r,profitMargin:r/e*100}})(),(()=>{const e=y(28e5*t),a=y(19e5*t),r=e-a;return{department:"Cardiology",revenue:e,expenses:a,profit:r,profitMargin:r/e*100}})(),(()=>{const a=y(19e5*t),r=y(14e5*t),s=a-r;return{department:"Pediatric"===e.type?"Pediatrics":"Oncology",revenue:a,expenses:r,profit:s,profitMargin:s/a*100}})(),(()=>{const a=y(11e5*t),r=y(8e5*t),s=a-r;return{department:"Trauma"===e.type?"Trauma":"Orthopedics",revenue:a,expenses:r,profit:s,profitMargin:s/a*100}})()]})(),patientMetrics:{totalPatients:y(15420*t,20),inpatients:y(2180*t,25),outpatients:y(11850*t,20),emergencyVisits:y(1390*t,30),averageStayDuration:y(42,15)/10,occupancyRate:y(87.5,10)},expenseBreakdown:(()=>{const e=y(52e5*t),a=y(18e5*t),r=y(12e5*t),s=y(6e5*t),n=y(5e5*t),o=y(5e5*t),i=e+a+r+s+n+o;return[{category:"Salaries & Benefits",amount:e,percentage:Math.round(e/i*100*10)/10,color:"#3b82f6"},{category:"Medical Supplies",amount:a,percentage:Math.round(a/i*100*10)/10,color:"#10b981"},{category:"Equipment",amount:r,percentage:Math.round(r/i*100*10)/10,color:"#f59e0b"},{category:"Utilities",amount:s,percentage:Math.round(s/i*100*10)/10,color:"#ef4444"},{category:"Maintenance",amount:n,percentage:Math.round(n/i*100*10)/10,color:"#8b5cf6"},{category:"Other",amount:o,percentage:Math.round(o/i*100*10)/10,color:"#6b7280"}]})(),cashFlowData:[{date:`${a}-01`,operatingCashFlow:y(21e5*t),investingCashFlow:y(-8e5*t),financingCashFlow:y(-3e5*t),netCashFlow:y(1e6*t)},{date:`${a}-02`,operatingCashFlow:y(195e4*t),investingCashFlow:y(-2e5*t),financingCashFlow:y(-4e5*t),netCashFlow:y(135e4*t)},{date:`${a}-03`,operatingCashFlow:y(23e5*t),investingCashFlow:y(-12e5*t),financingCashFlow:y(-2e5*t),netCashFlow:y(9e5*t)},{date:`${a}-04`,operatingCashFlow:y(22e5*t),investingCashFlow:y(-3e5*t),financingCashFlow:y(-35e4*t),netCashFlow:y(155e4*t)},{date:`${a}-05`,operatingCashFlow:y(25e5*t),investingCashFlow:y(-15e4*t),financingCashFlow:y(-3e5*t),netCashFlow:y(205e4*t)},{date:`${a}-06`,operatingCashFlow:y(235e4*t),investingCashFlow:y(-6e5*t),financingCashFlow:y(-25e4*t),netCashFlow:y(15e5*t)}]};f.push(r)})});const b=e.createContext(void 0),v=({children:t})=>{const[r,s]=e.useState(null),[n,o]=e.useState(!0);e.useEffect(()=>{const e=localStorage.getItem("hospitalFinanceUser");if(e)try{const a=JSON.parse(e);a&&"object"==typeof a&&"id"in a&&"email"in a?s(a):(x.warn("Invalid user data in localStorage, removing...",{context:"AuthContext"}),localStorage.removeItem("hospitalFinanceUser"))}catch(a){x.error("Failed to parse stored user data",{context:"AuthContext",data:a}),localStorage.removeItem("hospitalFinanceUser")}o(!1)},[]);const i={user:r,isAuthenticated:!!r,isLoading:n,signIn:async(e,a)=>{o(!0);try{const t=await(async(e,a)=>{await new Promise(e=>setTimeout(e,1e3));const t=m(a);if(!t.isValid)throw new Error(t.errors[0]);const r=h.find(a=>a.email===e);if(!r)throw new Error("No account found with this email address");const s=`login_attempts_${e}`,n=parseInt(localStorage.getItem(s)||"0");if(n>=5){const a=localStorage.getItem(`lockout_${e}`);if(a&&Date.now()-parseInt(a)<9e5)throw new Error("Account temporarily locked due to too many failed attempts. Try again in 15 minutes.");localStorage.removeItem(s),localStorage.removeItem(`lockout_${e}`)}if(!["UsamaHF2024!","OwnerMG2024!","ManagerMG2024!","Demo123!@#"].includes(a))throw localStorage.setItem(s,(n+1).toString()),n+1>=5&&localStorage.setItem(`lockout_${e}`,Date.now().toString()),new Error("Incorrect password");return localStorage.removeItem(s),localStorage.removeItem(`lockout_${e}`),r.lastLogin=(new Date).toISOString(),r})(e,a);if(!t||!t.id||!t.email)throw new Error("Invalid user data received from authentication service");s(t),localStorage.setItem("hospitalFinanceUser",JSON.stringify(t))}catch(t){throw x.error("Sign in failed",{context:"AuthContext",data:t}),t}finally{o(!1)}},signUp:async e=>{o(!0);try{const a=await(async e=>{if(await new Promise(e=>setTimeout(e,1200)),h.find(a=>a.email===e.email))throw new Error("User with this email already exists");const a={id:`user-${Date.now()}`,email:e.email,name:e.name,role:e.role,createdAt:(new Date).toISOString(),lastLogin:(new Date).toISOString(),...e.hospitalId&&{hospitalId:e.hospitalId},...e.hospitalIds&&{hospitalIds:e.hospitalIds}};return h.push(a),a})(e);if(!a||!a.id||!a.email)throw new Error("Invalid user data received from registration service");s(a),localStorage.setItem("hospitalFinanceUser",JSON.stringify(a))}catch(a){throw x.error("Sign up failed",{context:"AuthContext",data:a}),a}finally{o(!1)}},signOut:()=>{x.info("User signed out",{context:"AuthContext",data:{userId:r?.id}}),s(null),localStorage.removeItem("hospitalFinanceUser")},canAccessHospital:e=>{if(!r)return!1;switch(r.role){case"admin":return!0;case"hospital_owner":return r.hospitalIds?.includes(e)||!1;case"branch_owner":return r.hospitalId===e;default:return!1}},getAccessibleHospitals:()=>{if(!r)return[];switch(r.role){case"admin":return p.map(e=>e.id);case"hospital_owner":return r.hospitalIds||[];case"branch_owner":return r.hospitalId?[r.hospitalId]:[];default:return[]}}};return a.jsx(b.Provider,{value:i,children:t})},w=()=>{const a=e.useContext(b);if(void 0===a)throw new Error("useAuth must be used within an AuthProvider");return a},j=({hospitals:t,selectedHospitalId:r,selectedYear:s,availableYears:n,onHospitalChange:i,onYearChange:l})=>{const{user:d,signOut:m}=w(),[h,u]=e.useState(!1);e.useEffect(()=>(document.body.style.overflow=h?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[h]);const x=t.map(e=>({value:e.id,label:e.name,subtitle:`${e.type} • ${e.location}`})),p=n.map(e=>({value:e.toString(),label:e.toString()})),g=t.find(e=>e.id===r);return a.jsx("header",{className:"bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border transition-colors duration-200 sticky top-0 z-30",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 max-w-screen-2xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between min-h-16 py-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:"H"})}),a.jsxs("div",{className:"hidden sm:block",children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold",children:"Hospital Finance Dashboard"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-dark-muted",children:g?`${g.name} • ${s}`:"Real-time financial insights and analytics"})]}),a.jsx("div",{className:"sm:hidden",children:a.jsx("h1",{className:"text-lg font-bold",children:"Dashboard"})})]}),a.jsxs("div",{className:"hidden xl:flex items-center space-x-6",children:[a.jsxs("div",{className:"flex items-end space-x-2 sm:space-x-4 min-w-0",children:[a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Hospital"}),a.jsx(o,{options:x,value:r,onChange:i,placeholder:"Select Hospital",className:"w-full sm:w-64"})]}),a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Year"}),a.jsx(o,{options:p,value:s.toString(),onChange:e=>l(parseInt(e)),placeholder:"Select Year",className:"w-full sm:w-40"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(c,{}),a.jsx("button",{className:"btn-secondary text-sm hidden 2xl:inline-flex","aria-label":"Export financial report",children:"Export Report"}),a.jsx("button",{className:"btn-primary text-sm hidden 2xl:inline-flex","aria-label":"Generate financial analysis",children:"Generate Analysis"})]}),a.jsxs("div",{className:"flex items-center space-x-2 pl-4 border-l border-gray-200 dark:border-dark-border",children:[a.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium text-sm",children:d?.name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium",children:d?.name}),a.jsx("p",{className:"text-gray-500 dark:text-dark-muted capitalize",children:d?.role.replace("_"," ")})]}),a.jsx("button",{onClick:m,className:"ml-2 text-gray-400 hover:text-danger-600 dark:text-gray-500 dark:hover:text-danger-400 transition-colors",title:"Sign out","aria-label":"Sign out of your account",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]}),a.jsxs("div",{className:"xl:hidden flex items-center space-x-2",children:[a.jsx(c,{size:"sm"}),a.jsxs("button",{type:"button",className:"p-2 rounded-md text-gray-900 dark:text-gray-100 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 border border-gray-300 dark:border-gray-600",onClick:()=>u(!h),"aria-controls":"mobile-menu","aria-expanded":h,children:[a.jsx("span",{className:"sr-only",children:"Open main menu"}),h?a.jsx("svg",{className:"block h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):a.jsx("svg",{className:"block h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})]})]})]}),a.jsxs("div",{className:"xl:hidden fixed inset-0 z-50 transition-opacity duration-300 "+(h?"opacity-100":"opacity-0 pointer-events-none"),children:[a.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>u(!1),"aria-hidden":"true"}),a.jsxs("div",{className:"fixed top-0 right-0 h-full w-full max-w-sm bg-white dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out "+(h?"translate-x-0":"translate-x-full"),id:"mobile-menu",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:"H"})}),a.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:"Menu"})]}),a.jsx("button",{onClick:()=>u(!1),className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex flex-col h-full",children:a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium text-lg",children:d?.name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:d?.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize truncate",children:d?.role.replace("_"," ")})]})]}),a.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors font-medium text-sm border border-red-200 dark:border-red-800","aria-label":"Sign out of your account",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Actions"}),a.jsxs("button",{className:"w-full btn-secondary text-left justify-start","aria-label":"Export financial report",onClick:()=>u(!1),children:[a.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Report"]}),a.jsxs("button",{className:"w-full btn-primary text-left justify-start","aria-label":"Generate financial analysis",onClick:()=>u(!1),children:[a.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Generate Analysis"]})]})]})})]})]})]})})},k=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),N=e=>`${e.toFixed(1)}%`,C=e=>new Intl.NumberFormat("en-US").format(e),S=e=>"increase"===e?"↗":"↘",I=({metric:e})=>{const t=(e,a)=>{switch(a){case"currency":return k(e);case"percentage":return N(e);case"number":return C(e);default:return e.toString()}};return a.jsxs("div",{className:"bg-white dark:bg-dark-surface p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 border border-gray-200 dark:border-dark-border",role:"article","aria-labelledby":`metric-title-${e.id}`,"aria-describedby":`metric-change-${e.id}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("h3",{id:`metric-title-${e.id}`,className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.title})}),a.jsx("div",{className:"mb-2",children:a.jsx("p",{className:"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white","aria-label":`${e.title} value: ${t(e.value,e.format)}`,children:t(e.value,e.format)})}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{id:`metric-change-${e.id}`,className:"flex items-center "+(r=e.changeType,"increase"===r?"text-success-600":"text-danger-600"),"aria-label":`${"increase"===e.changeType?"Increased":"Decreased"} by ${N(e.change)} ${e.period}`,children:[a.jsx("span",{className:"mr-1","aria-hidden":"true",children:S(e.changeType)})," ",N(e.change)]}),a.jsx("span",{className:"text-gray-500 dark:text-dark-muted",children:e.period})]})]});var r},L=({variant:e="primary",size:t="md",isLoading:r=!1,fullWidth:s=!1,className:n="",children:o,disabled:i,...l})=>{const d=`font-medium rounded-lg transition-all duration-200 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transform hover:-translate-y-0.5 active:translate-y-0 ${{primary:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white focus:ring-primary-500 shadow-md hover:shadow-lg",secondary:"bg-gray-200 hover:bg-gray-300 dark:bg-dark-surface dark:hover:bg-dark-hover-surface text-gray-800 dark:text-dark-primary focus:ring-gray-500 border border-gray-300 dark:border-dark-border shadow-sm hover:shadow-md",danger:"bg-danger-600 hover:bg-danger-700 disabled:bg-danger-400 text-white focus:ring-danger-500 shadow-md hover:shadow-lg",ghost:"bg-transparent hover:bg-gray-100 dark:hover:bg-dark-surface text-gray-700 dark:text-dark-primary focus:ring-gray-500"}[e]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t]} ${s?"w-full":""} ${n}`;return a.jsx("button",{className:d,disabled:i||r,...l,children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Loading..."]}):o})},M=({size:e="md",text:t="Loading...",subtext:r,className:s=""})=>{const n={sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16"}[e];return a.jsx("div",{className:`flex items-center justify-center p-4 ${s}`,role:"status","aria-live":"polite",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`animate-spin rounded-full ${n} border-b-2 border-primary-600 mx-auto mb-4`,"aria-hidden":"true"}),t&&a.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium text-sm sm:text-base",children:t}),r&&a.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1 max-w-xs mx-auto",children:r})]})})},E=({hospitals:e,selectedHospitalId:t,selectedYear:r,availableYears:s,onHospitalChange:n,onYearChange:o})=>{const i=e.find(e=>e.id===t);return a.jsxs("div",{className:"text-gray-900 dark:text-gray-100",children:[a.jsx(j,{hospitals:e,selectedHospitalId:t,selectedYear:r,availableYears:s,onHospitalChange:n,onYearChange:o}),a.jsx("main",{className:"p-4 sm:p-6",children:a.jsx(M,{size:"md",text:"Loading dashboard data...",subtext:i?`${i.name} • ${r}`:"",className:"min-h-96"})})]})},F=({hospitals:e,selectedHospitalId:t,selectedYear:r,availableYears:s,onHospitalChange:n,onYearChange:o})=>a.jsxs("div",{className:"text-gray-900 dark:text-gray-100",children:[a.jsx(j,{hospitals:e,selectedHospitalId:t,selectedYear:r,availableYears:s,onHospitalChange:n,onYearChange:o}),a.jsx("main",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Data Available"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"No financial data found for the selected hospital and year combination."}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Please select a different hospital or year."})]})})]}),A=e.lazy(()=>n(()=>import("./RevenueChart-CKd5IpGr.js"),__vite__mapDeps([0,1,2,3]))),P=e.lazy(()=>n(()=>import("./ExpensePieChart-XJZIn71i.js"),__vite__mapDeps([4,1,2,3]))),T=e.lazy(()=>n(()=>import("./CashFlowChart-CrNhCvMH.js"),__vite__mapDeps([5,1,2]))),D=e.lazy(()=>n(()=>import("./PatientMetricsCard-CLWSD3gV.js"),__vite__mapDeps([6,1]))),_=e.lazy(()=>n(()=>import("./DepartmentTable-DF8UBQC7.js"),__vite__mapDeps([7,1]))),H=()=>{const{user:t,signOut:r,getAccessibleHospitals:s,canAccessHospital:n}=w(),i=s(),l=e.useMemo(()=>p.filter(e=>i.includes(e.id)),[i]),[d,c]=e.useState(i[0]||""),[m,h]=e.useState(2024),[u,y]=e.useState(null),[b,v]=e.useState(!0),[k,N]=e.useState(!1);e.useEffect(()=>{let e;return d&&m&&(v(!0),x.info("Loading dashboard data",{context:"Dashboard",data:{hospitalId:d,year:m}}),e=setTimeout(()=>{const e=(a=d,t=m,f.find(e=>e.hospitalId===a&&e.year===t));var a,t;e||x.warn("No data available for hospital and year",{context:"Dashboard",data:{hospitalId:d,year:m}}),y(e||null),v(!1)},500)),()=>{e&&clearTimeout(e)}},[d,m]);const C=e.useCallback(e=>{n(e)?(x.info("Hospital selection changed",{context:"Dashboard",data:{hospitalId:e}}),c(e)):x.warn("Unauthorized hospital access attempt",{context:"Dashboard",data:{hospitalId:e}})},[n]),S=e.useCallback(e=>{x.info("Year selection changed",{context:"Dashboard",data:{year:e,previousYear:m}}),h(e)},[m]),H=e.useMemo(()=>l.map(e=>({value:e.id,label:e.name,subtitle:`${e.type} • ${e.location}`})),[l]),$=e.useMemo(()=>g.map(e=>({value:e.toString(),label:e.toString()})),[]);return b?a.jsx(E,{hospitals:l,selectedHospitalId:d,selectedYear:m,availableYears:g,onHospitalChange:C,onYearChange:S,user:t,signOut:r}):u?a.jsxs("div",{className:"text-gray-900 dark:text-dark-primary relative",children:[a.jsx(j,{hospitals:l,selectedHospitalId:d,selectedYear:m,availableYears:g,onHospitalChange:C,onYearChange:S}),a.jsxs("main",{className:"p-3 sm:p-4 lg:p-6 xl:p-8 max-w-screen-2xl mx-auto",children:[a.jsxs("div",{className:"xl:hidden mb-4",children:[a.jsxs(L,{onClick:()=>N(!k),className:"w-full","aria-expanded":k,"aria-controls":"mobile-filter-panel",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),k?"Hide":"Show"," Filters"]}),k&&a.jsx("div",{id:"mobile-filter-panel",className:"mt-4 p-4 bg-white dark:bg-dark-surface rounded-lg shadow-md border border-gray-200 dark:border-dark-border",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hospital"}),a.jsx(o,{options:H,value:d,onChange:C,placeholder:"Select Hospital",className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year"}),a.jsx(o,{options:$,value:m.toString(),onChange:e=>S(parseInt(e)),placeholder:"Select Year",className:"w-full"})]})]})})]}),a.jsxs("div",{className:"mb-6 lg:mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Key Financial Metrics"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:u.financialMetrics.map(e=>a.jsx(I,{metric:e},e.id))})]}),a.jsxs(e.Suspense,{fallback:a.jsx(M,{text:"Loading charts..."}),children:[a.jsxs("div",{className:"space-y-6 lg:space-y-8 mb-6 lg:mb-8",children:[a.jsx("div",{className:"w-full",children:a.jsx(A,{data:u.revenueData})}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8",children:[a.jsx(P,{data:u.expenseBreakdown}),a.jsx(T,{data:u.cashFlowData})]})]}),a.jsx("div",{className:"mb-6 lg:mb-8",children:a.jsx(D,{metrics:u.patientMetrics})}),a.jsx("div",{className:"mb-6 lg:mb-8",children:a.jsx(_,{departments:u.departmentFinances})})]}),a.jsxs("footer",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-12 py-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("p",{children:"© 2024 Hospital Finance Dashboard. All rights reserved."}),a.jsxs("p",{className:"mt-1",children:["Last updated: ",u.lastUpdated]})]})]})]}):a.jsx(F,{hospitals:l,selectedHospitalId:d,selectedYear:m,availableYears:g,onHospitalChange:C,onYearChange:S,user:t,signOut:r})};class $ extends e.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){x.error("Uncaught error in component",{context:"ErrorBoundary",data:{error:{name:e.name,message:e.message,stack:e.stack},componentStack:a.componentStack}}),this.setState({error:e,errorInfo:a})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-slate-900 text-gray-900 dark:text-gray-100",children:a.jsx("div",{className:"max-w-md w-full mx-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-danger-100 dark:bg-danger-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-danger-600 dark:text-danger-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"We encountered an unexpected error. Please try refreshing the page or contact support if the problem persists."}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(L,{onClick:()=>window.location.reload(),fullWidth:!0,children:"Refresh Page"}),a.jsx(L,{onClick:()=>this.setState({hasError:!1}),variant:"secondary",fullWidth:!0,children:"Try Again"})]}),!1]})})}):this.props.children}}const O=[{role:"Admin",email:"admin@hospitalfinance.com",password:"UsamaHF2024!"},{role:"Hospital Owner",email:"owner@metrogeneral.com",password:"OwnerMG2024!"},{role:"Branch Manager",email:"manager@metrogeneral.com",password:"ManagerMG2024!"}],W=({label:t,id:r,type:s,...n})=>{const[o,i]=e.useState(!1),l="password"===s,d=l?o?"text":"password":s;return a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:r,type:d,className:"w-full px-3 py-2 bg-transparent border-b-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:outline-none focus:border-primary-500 transition-colors",...n,placeholder:n.placeholder||" "}),a.jsx("label",{htmlFor:r,className:"absolute left-3 -top-3.5 text-sm text-gray-600 dark:text-gray-400 transition-all duration-200 peer-placeholder-shown:top-2 peer-placeholder-shown:text-base peer-focus:-top-3.5 peer-focus:text-sm peer-focus:text-primary-600 dark:peer-focus:text-primary-400",children:t}),l&&a.jsx("button",{type:"button",onClick:()=>i(!o),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":o?"Hide password":"Show password",children:o?a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a9.97 9.97 0 01-1.563 3.029m0 0l-2.14 2.14"})}):a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z"})]})})]})},z=({children:e,className:t=""})=>a.jsx("div",{className:`bg-white dark:bg-dark-surface rounded-lg shadow-lg p-8 space-y-6 ${t}`,children:e}),Y=({onSwitchToSignUp:t})=>{const[r,s]=e.useState(""),[n,o]=e.useState(""),[i,l]=e.useState(""),{signIn:d,isLoading:c}=w();return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-bg text-gray-900 dark:text-dark-primary flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 transition-colors duration-200",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8 animate-fade-in-down",children:[a.jsx("div",{className:"mx-auto w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mb-4 shadow-lg",children:a.jsxs("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2v10m0-10l3 3m-3-3l-3 3"}),a.jsx("path",{d:"M12 18v2",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),a.jsx("path",{d:"M4 12h2m8 0h2m-4 0h-2",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})]})}),a.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Welcome back"}),a.jsx("p",{className:"mt-2 text-gray-600 dark:text-dark-muted",children:"Sign in to your Hospital Finance Dashboard"})]}),a.jsx(z,{className:"mb-6 animate-fade-in-up",children:a.jsxs("div",{className:"p-2 sm:p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-3 text-center",children:"Or sign in with a demo account:"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:O.map((e,t)=>a.jsx("button",{onClick:()=>{return a=e.email,t=e.password,s(a),void o(t);var a,t},className:"w-full text-center text-xs bg-white dark:bg-dark-surface hover:bg-gray-100 dark:hover:bg-dark-hover-surface border border-gray-200 dark:border-dark-border rounded-lg px-2 py-2 transition-all duration-200 shadow-sm hover:shadow-md",children:a.jsx("span",{className:"font-semibold text-primary-600 dark:text-primary-400 capitalize",children:e.role.replace("_"," ")})},t))})]})}),a.jsxs(z,{className:"animate-fade-in-up animation-delay-200",children:[a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l("");const a=m(n);if(a.isValid)try{x.info("Sign in attempt",{context:"SignInPage",data:{email:r}}),await d(r,n),x.info("Sign in successful",{context:"SignInPage",data:{email:r}})}catch(t){x.error("Sign in failed",{context:"SignInPage",data:{email:r,error:t}}),l((e=>e instanceof Error?e.message.includes("Invalid credentials")?"Invalid email or password":e.message.includes("Rate limit")?"Too many attempts. Please try again later":"An error occurred during authentication":"An unexpected error occurred")(t))}else l(a.errors[0]||"Invalid password")},className:"space-y-6",children:[i&&a.jsx("div",{className:"bg-danger-50 border border-danger-200 text-danger-700 px-4 py-3 rounded-lg text-sm",children:i}),a.jsx(W,{id:"email",type:"email",label:"Email Address",required:!0,value:r,onChange:e=>s(e.target.value),placeholder:"Enter your email"}),a.jsx(W,{id:"password",type:"password",label:"Password",required:!0,value:n,onChange:e=>o(e.target.value),placeholder:"Enter your password"}),a.jsx(L,{type:"submit",isLoading:c,fullWidth:!0,children:"Sign In"})]}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-dark-muted",children:["Don't have an account?"," ",a.jsx("button",{type:"button",onClick:t,className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign up"})]})})]}),a.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-dark-muted mt-8 animate-fade-in-up animation-delay-400",children:a.jsx("p",{children:"© 2024 Hospital Finance Dashboard. All rights reserved."})})]})})},U=({onSwitchToSignIn:t})=>{const[r,s]=e.useState({name:"",email:"",password:"",confirmPassword:"",role:"branch_owner",hospitalId:"",hospitalIds:[]}),[n,o]=e.useState(""),{signUp:i,isLoading:l}=w(),d=(e,a)=>{s(t=>({...t,[e]:a}))};return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-bg flex items-center justify-center py-6 sm:py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-lg w-full",children:[a.jsxs("div",{className:"text-center mb-8 animate-fade-in-down",children:[a.jsx("div",{className:"mx-auto w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mb-4 shadow-lg",children:a.jsxs("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2v10m0-10l3 3m-3-3l-3 3"}),a.jsx("path",{d:"M12 18v2",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),a.jsx("path",{d:"M4 12h2m8 0h2m-4 0h-2",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})]})}),a.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Create an Account"}),a.jsx("p",{className:"mt-2 text-gray-600 dark:text-dark-muted",children:"Join the Hospital Finance Dashboard"})]}),a.jsx(z,{className:"animate-fade-in-up",children:a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o(""),r.password===r.confirmPassword)if(r.password.length<6)o("Password must be at least 6 characters long");else if("branch_owner"!==r.role||r.hospitalId)if("hospital_owner"!==r.role||0!==r.hospitalIds.length)try{const e={name:r.name,email:r.email,password:r.password,role:r.role};"branch_owner"===r.role&&r.hospitalId&&(e.hospitalId=r.hospitalId),"hospital_owner"===r.role&&r.hospitalIds.length>0&&(e.hospitalIds=r.hospitalIds),await i(e)}catch(a){o(a instanceof Error?a.message:"An error occurred")}else o("Please select at least one hospital for hospital owner role");else o("Please select a hospital for branch manager role");else o("Passwords do not match")},className:"space-y-6",children:[n&&a.jsx("div",{className:"bg-danger-50 dark:bg-danger-900/20 border border-danger-200 dark:border-danger-800 text-danger-700 dark:text-danger-300 px-4 py-3 rounded-lg text-sm animate-shake",children:n}),a.jsx(W,{id:"name",type:"text",label:"Full Name",required:!0,value:r.name,onChange:e=>d("name",e.target.value),placeholder:"Enter your full name"}),a.jsx(W,{id:"email",type:"email",label:"Email Address",required:!0,value:r.email,onChange:e=>d("email",e.target.value),placeholder:"Enter your email"}),a.jsx(W,{id:"password",type:"password",label:"Password",required:!0,value:r.password,onChange:e=>d("password",e.target.value),placeholder:"Create a password"}),a.jsx(W,{id:"confirmPassword",type:"password",label:"Confirm Password",required:!0,value:r.confirmPassword,onChange:e=>d("confirmPassword",e.target.value),placeholder:"Confirm your password"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Account Type"}),a.jsx("div",{className:"space-y-3",children:Object.keys(u).map(e=>a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{id:e,type:"radio",name:"role",value:e,checked:r.role===e,onChange:e=>d("role",e.target.value),className:"mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",disabled:"admin"===e}),a.jsxs("div",{className:"ml-3",children:[a.jsxs("label",{htmlFor:e,className:"block text-sm font-medium text-gray-900 dark:text-white",children:[u[e].title,"admin"===e&&a.jsx("span",{className:"text-gray-400 dark:text-gray-500 ml-2",children:"(Contact admin)"})]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:u[e].description})]})]},e))})]}),"branch_owner"===r.role&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"hospitalId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Hospital"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{id:"hospitalId",value:r.hospitalId,onChange:e=>d("hospitalId",e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 appearance-none",required:!0,children:[a.jsx("option",{value:"",children:"Choose a hospital..."}),p.map(e=>a.jsxs("option",{value:e.id,children:[e.name," (",e.type," • ",e.location,")"]},e.id))]}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),"hospital_owner"===r.role&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Hospitals (you can select multiple)"}),a.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-gray-50 dark:bg-gray-700",children:p.map(e=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:`hospital-${e.id}`,type:"checkbox",checked:r.hospitalIds.includes(e.id),onChange:a=>{return t=e.id,r=a.target.checked,void s(r?e=>({...e,hospitalIds:[...e.hospitalIds,t]}):e=>({...e,hospitalIds:e.hospitalIds.filter(e=>e!==t)}));var t,r},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded"}),a.jsxs("label",{htmlFor:`hospital-${e.id}`,className:"ml-2 text-sm text-gray-900 dark:text-white",children:[e.name,a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:["(",e.type," • ",e.location,")"]})]})]},e.id))})]}),a.jsx(L,{type:"submit",isLoading:l,fullWidth:!0,children:"Create Account"}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-dark-muted",children:["Already have an account?"," ",a.jsx("button",{type:"button",onClick:t,className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium",children:"Sign in"})]})})]})}),a.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-dark-muted mt-8 animate-fade-in-up animation-delay-200",children:a.jsx("p",{children:"© 2024 Hospital Finance Dashboard. All rights reserved."})})]})})},B=({children:t})=>{const[r,s]=e.useState(!1),{isAuthenticated:n,isLoading:o}=w();return o?a.jsx(M,{size:"md",text:"Loading...",className:"min-h-screen"}):n?a.jsx(a.Fragment,{children:t}):r?a.jsx(U,{onSwitchToSignIn:()=>s(!1)}):a.jsx(Y,{onSwitchToSignUp:()=>s(!0)})};function V(){return a.jsx($,{children:a.jsx(l,{children:a.jsx(v,{children:a.jsx("div",{className:"App min-h-screen bg-gray-100 dark:bg-dark-bg text-gray-900 dark:text-dark-primary transition-colors duration-200 overflow-x-hidden",children:a.jsx(B,{children:a.jsx(e.Suspense,{fallback:a.jsx(M,{text:"Loading Dashboard...",className:"min-h-screen"}),children:a.jsx(H,{})})})})})})})}t.createRoot(document.getElementById("root")).render(a.jsx(r.StrictMode,{children:a.jsx(V,{})}));export{N as a,C as b,k as f,d as u};
//# sourceMappingURL=main-3qpWajQq.js.map
